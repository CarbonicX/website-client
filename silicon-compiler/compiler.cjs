"use strict";var Nc=Object.create;var li=Object.defineProperty;var _c=Object.getOwnPropertyDescriptor;var Cc=Object.getOwnPropertyNames;var vc=Object.getPrototypeOf,Lc=Object.prototype.hasOwnProperty;var kc=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Cc(e))!Lc.call(t,o)&&o!==r&&li(t,o,{get:()=>e[o],enumerable:!(n=_c(e,o))||n.enumerable});return t};var Vr=(t,e,r)=>(r=t!=null?Nc(vc(t)):{},kc(e||!t||!t.__esModule?li(r,"default",{value:t,enumerable:!0}):r,t));var yc=Vr(require("fs"),1),Rc=Vr(require("path"),1);var ot=Vr(require("fs"),1),nt=Vr(require("path"),1),Pt=class{static declaration=new Map;static generateDeclarations(e){for(let r of e){let n=r.name,o="";r.parameters.length>0&&(o=", "+r.parameters.join(": any, ")+": any");let i="";for(let a of r.list.elements)i+=`		this.addChild(${this.generateCode(a)});
`;let s=`
import * as silicon from "../silicon.index.js";
export class ${n} extends silicon.ComplexWidgetBase {
    protected _element: HTMLElement;
    constructor(id: string | null, classes: string[]${o}) {
        super(id, classes);
        this._element = document.createElement("div");

${i}
        this.setIdAndClasses();
    }
}
`;this.declaration.set(r.name,s)}}static generateCode(e){if(e.type=="Literal"||e.type=="Code")return e.value;if(e.type=="Variable")return e.name;if(e.type=="List"){let r=[];for(let n of e.elements)r.push(this.generateCode(n));return`[${r.join(", ")}]`}if(e.type=="WidgetUse"){let r=`silicon.${e.name}`,n=[];for(let a of e.parameters)n.push(this.generateCode(a));let o=n.join(", ");o.length>0&&(o=", "+o);let i="null";e.id!=null&&(i=`"${e.id}"`);let s="[]";if(e.classes.length>0){let a=[];for(let l of e.classes)a.push(`"${l}"`);s=`[${a.join(", ")}]`}return`new ${r}(${i}, ${s}${o})`}}static generateFiles(e){ot.default.existsSync(nt.default.join(e,"generated"))||ot.default.mkdirSync(nt.default.join(e,"generated"));for(let r of this.declaration.keys()){let n=nt.default.join(e,`/generated/${r.toLowerCase()}.ts`);ot.default.writeFileSync(n,this.declaration.get(r))}}static generateIndexTemplate(e,r){let n=nt.default.join(e,"silicon.index.ts"),o=ot.default.readFileSync(n,"utf-8").split(`
`),i=[],s=[];for(let c of o){let f=c.split(" ");for(let u=0;u<f.length;u++)if(f[u]=="as"){i.push(f[u+1]),s.push(c);break}}let a="",l=uo(r);for(let c of l)if(c.endsWith(".ts")){let f=c.slice(0,-3)+".js",u=nt.default.relative(e,f);a+=`export * from "./${u}";
`}a=a.replaceAll("\\","/"),a+=`
`;for(let c of this.declaration.keys())i.includes(c)||(a+=`export { ${c} } from "./generated/${c.toLowerCase()}.js";
`);a+=`
`,a+=s.join(`
`),a+=`
`,ot.default.writeFileSync(nt.default.join(e,"silicon.index.ts"),a)}};function uo(t){let e=[];function r(n){let o=ot.default.readdirSync(n);for(let i of o){let s=nt.default.join(n,i);ot.default.statSync(s).isDirectory()?r(s):e.push(s)}}return r(t),e}var bc=typeof global=="object"&&global&&global.Object===Object&&global,Xr=bc;var Pc=typeof self=="object"&&self&&self.Object===Object&&self,Mc=Xr||Pc||Function("return this")(),q=Mc;var wc=q.Symbol,oe=wc;var ci=Object.prototype,Fc=ci.hasOwnProperty,Uc=ci.toString,Ar=oe?oe.toStringTag:void 0;function Dc(t){var e=Fc.call(t,Ar),r=t[Ar];try{t[Ar]=void 0;var n=!0}catch{}var o=Uc.call(t);return n&&(e?t[Ar]=r:delete t[Ar]),o}var fi=Dc;var Bc=Object.prototype,Gc=Bc.toString;function Wc(t){return Gc.call(t)}var ui=Wc;var $c="[object Null]",jc="[object Undefined]",pi=oe?oe.toStringTag:void 0;function Kc(t){return t==null?t===void 0?jc:$c:pi&&pi in Object(t)?fi(t):ui(t)}var ue=Kc;function Hc(t){return t!=null&&typeof t=="object"}var z=Hc;var zc="[object Symbol]";function Vc(t){return typeof t=="symbol"||z(t)&&ue(t)==zc}var it=Vc;function Xc(t,e){for(var r=-1,n=t==null?0:t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}var Me=Xc;var Yc=Array.isArray,A=Yc;var qc=1/0,hi=oe?oe.prototype:void 0,di=hi?hi.toString:void 0;function mi(t){if(typeof t=="string")return t;if(A(t))return Me(t,mi)+"";if(it(t))return di?di.call(t):"";var e=t+"";return e=="0"&&1/t==-qc?"-0":e}var gi=mi;var Zc=/\s/;function Qc(t){for(var e=t.length;e--&&Zc.test(t.charAt(e)););return e}var xi=Qc;var Jc=/^\s+/;function ef(t){return t&&t.slice(0,xi(t)+1).replace(Jc,"")}var Ti=ef;function tf(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var G=tf;var Ei=NaN,rf=/^[-+]0x[0-9a-f]+$/i,nf=/^0b[01]+$/i,of=/^0o[0-7]+$/i,sf=parseInt;function af(t){if(typeof t=="number")return t;if(it(t))return Ei;if(G(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=G(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Ti(t);var r=nf.test(t);return r||of.test(t)?sf(t.slice(2),r?2:8):rf.test(t)?Ei:+t}var Ai=af;var Ii=1/0,lf=17976931348623157e292;function cf(t){if(!t)return t===0?t:0;if(t=Ai(t),t===Ii||t===-Ii){var e=t<0?-1:1;return e*lf}return t===t?t:0}var yi=cf;function ff(t){var e=yi(t),r=e%1;return e===e?r?e-r:e:0}var we=ff;function uf(t){return t}var Oe=uf;var pf="[object AsyncFunction]",hf="[object Function]",df="[object GeneratorFunction]",mf="[object Proxy]";function gf(t){if(!G(t))return!1;var e=ue(t);return e==hf||e==df||e==pf||e==mf}var pe=gf;var xf=q["__core-js_shared__"],Yr=xf;var Ri=(function(){var t=/[^.]+$/.exec(Yr&&Yr.keys&&Yr.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""})();function Tf(t){return!!Ri&&Ri in t}var Si=Tf;var Ef=Function.prototype,Af=Ef.toString;function If(t){if(t!=null){try{return Af.call(t)}catch{}try{return t+""}catch{}}return""}var ze=If;var yf=/[\\^$.*+?()[\]{}|]/g,Rf=/^\[object .+?Constructor\]$/,Sf=Function.prototype,Of=Object.prototype,Nf=Sf.toString,_f=Of.hasOwnProperty,Cf=RegExp("^"+Nf.call(_f).replace(yf,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function vf(t){if(!G(t)||Si(t))return!1;var e=pe(t)?Cf:Rf;return e.test(ze(t))}var Oi=vf;function Lf(t,e){return t?.[e]}var Ni=Lf;function kf(t,e){var r=Ni(t,e);return Oi(r)?r:void 0}var xe=kf;var bf=xe(q,"WeakMap"),qr=bf;var _i=Object.create,Pf=(function(){function t(){}return function(e){if(!G(e))return{};if(_i)return _i(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}})(),Ci=Pf;function Mf(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var vi=Mf;function wf(){}var W=wf;function Ff(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var Li=Ff;var Uf=800,Df=16,Bf=Date.now;function Gf(t){var e=0,r=0;return function(){var n=Bf(),o=Df-(n-r);if(r=n,o>0){if(++e>=Uf)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var ki=Gf;function Wf(t){return function(){return t}}var bi=Wf;var $f=(function(){try{var t=xe(Object,"defineProperty");return t({},"",{}),t}catch{}})(),Mt=$f;var jf=Mt?function(t,e){return Mt(t,"toString",{configurable:!0,enumerable:!1,value:bi(e),writable:!0})}:Oe,Pi=jf;var Kf=ki(Pi),Mi=Kf;function Hf(t,e){for(var r=-1,n=t==null?0:t.length;++r<n&&e(t[r],r,t)!==!1;);return t}var Zr=Hf;function zf(t,e,r,n){for(var o=t.length,i=r+(n?1:-1);n?i--:++i<o;)if(e(t[i],i,t))return i;return-1}var Qr=zf;function Vf(t){return t!==t}var wi=Vf;function Xf(t,e,r){for(var n=r-1,o=t.length;++n<o;)if(t[n]===e)return n;return-1}var Fi=Xf;function Yf(t,e,r){return e===e?Fi(t,e,r):Qr(t,wi,r)}var wt=Yf;function qf(t,e){var r=t==null?0:t.length;return!!r&&wt(t,e,0)>-1}var Jr=qf;var Zf=9007199254740991,Qf=/^(?:0|[1-9]\d*)$/;function Jf(t,e){var r=typeof t;return e=e??Zf,!!e&&(r=="number"||r!="symbol"&&Qf.test(t))&&t>-1&&t%1==0&&t<e}var st=Jf;function eu(t,e,r){e=="__proto__"&&Mt?Mt(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var Ft=eu;function tu(t,e){return t===e||t!==t&&e!==e}var Fe=tu;var ru=Object.prototype,nu=ru.hasOwnProperty;function ou(t,e,r){var n=t[e];(!(nu.call(t,e)&&Fe(n,r))||r===void 0&&!(e in t))&&Ft(t,e,r)}var at=ou;function iu(t,e,r,n){var o=!r;r||(r={});for(var i=-1,s=e.length;++i<s;){var a=e[i],l=n?n(r[a],t[a],a,r,t):void 0;l===void 0&&(l=t[a]),o?Ft(r,a,l):at(r,a,l)}return r}var Ue=iu;var Ui=Math.max;function su(t,e,r){return e=Ui(e===void 0?t.length-1:e,0),function(){for(var n=arguments,o=-1,i=Ui(n.length-e,0),s=Array(i);++o<i;)s[o]=n[e+o];o=-1;for(var a=Array(e+1);++o<e;)a[o]=n[o];return a[e]=r(s),vi(t,this,a)}}var Di=su;function au(t,e){return Mi(Di(t,e,Oe),t+"")}var Ut=au;var lu=9007199254740991;function cu(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=lu}var Dt=cu;function fu(t){return t!=null&&Dt(t.length)&&!pe(t)}var Z=fu;function uu(t,e,r){if(!G(r))return!1;var n=typeof e;return(n=="number"?Z(r)&&st(e,r.length):n=="string"&&e in r)?Fe(r[e],t):!1}var lt=uu;function pu(t){return Ut(function(e,r){var n=-1,o=r.length,i=o>1?r[o-1]:void 0,s=o>2?r[2]:void 0;for(i=t.length>3&&typeof i=="function"?(o--,i):void 0,s&&lt(r[0],r[1],s)&&(i=o<3?void 0:i,o=1),e=Object(e);++n<o;){var a=r[n];a&&t(e,a,n,i)}return e})}var Bi=pu;var hu=Object.prototype;function du(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||hu;return t===r}var De=du;function mu(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var Gi=mu;var gu="[object Arguments]";function xu(t){return z(t)&&ue(t)==gu}var po=xu;var Wi=Object.prototype,Tu=Wi.hasOwnProperty,Eu=Wi.propertyIsEnumerable,Au=po((function(){return arguments})())?po:function(t){return z(t)&&Tu.call(t,"callee")&&!Eu.call(t,"callee")},ct=Au;function Iu(){return!1}var $i=Iu;var Hi=typeof exports=="object"&&exports&&!exports.nodeType&&exports,ji=Hi&&typeof module=="object"&&module&&!module.nodeType&&module,yu=ji&&ji.exports===Hi,Ki=yu?q.Buffer:void 0,Ru=Ki?Ki.isBuffer:void 0,Su=Ru||$i,Ve=Su;var Ou="[object Arguments]",Nu="[object Array]",_u="[object Boolean]",Cu="[object Date]",vu="[object Error]",Lu="[object Function]",ku="[object Map]",bu="[object Number]",Pu="[object Object]",Mu="[object RegExp]",wu="[object Set]",Fu="[object String]",Uu="[object WeakMap]",Du="[object ArrayBuffer]",Bu="[object DataView]",Gu="[object Float32Array]",Wu="[object Float64Array]",$u="[object Int8Array]",ju="[object Int16Array]",Ku="[object Int32Array]",Hu="[object Uint8Array]",zu="[object Uint8ClampedArray]",Vu="[object Uint16Array]",Xu="[object Uint32Array]",F={};F[Gu]=F[Wu]=F[$u]=F[ju]=F[Ku]=F[Hu]=F[zu]=F[Vu]=F[Xu]=!0;F[Ou]=F[Nu]=F[Du]=F[_u]=F[Bu]=F[Cu]=F[vu]=F[Lu]=F[ku]=F[bu]=F[Pu]=F[Mu]=F[wu]=F[Fu]=F[Uu]=!1;function Yu(t){return z(t)&&Dt(t.length)&&!!F[ue(t)]}var zi=Yu;function qu(t){return function(e){return t(e)}}var Be=qu;var Vi=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ir=Vi&&typeof module=="object"&&module&&!module.nodeType&&module,Zu=Ir&&Ir.exports===Vi,ho=Zu&&Xr.process,Qu=(function(){try{var t=Ir&&Ir.require&&Ir.require("util").types;return t||ho&&ho.binding&&ho.binding("util")}catch{}})(),Ne=Qu;var Xi=Ne&&Ne.isTypedArray,Ju=Xi?Be(Xi):zi,Bt=Ju;var ep=Object.prototype,tp=ep.hasOwnProperty;function rp(t,e){var r=A(t),n=!r&&ct(t),o=!r&&!n&&Ve(t),i=!r&&!n&&!o&&Bt(t),s=r||n||o||i,a=s?Gi(t.length,String):[],l=a.length;for(var c in t)(e||tp.call(t,c))&&!(s&&(c=="length"||o&&(c=="offset"||c=="parent")||i&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||st(c,l)))&&a.push(c);return a}var en=rp;function np(t,e){return function(r){return t(e(r))}}var tn=np;var op=tn(Object.keys,Object),Yi=op;var ip=Object.prototype,sp=ip.hasOwnProperty;function ap(t){if(!De(t))return Yi(t);var e=[];for(var r in Object(t))sp.call(t,r)&&r!="constructor"&&e.push(r);return e}var rn=ap;function lp(t){return Z(t)?en(t):rn(t)}var k=lp;var cp=Object.prototype,fp=cp.hasOwnProperty,up=Bi(function(t,e){if(De(e)||Z(e)){Ue(e,k(e),t);return}for(var r in e)fp.call(e,r)&&at(t,r,e[r])}),se=up;function pp(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}var qi=pp;var hp=Object.prototype,dp=hp.hasOwnProperty;function mp(t){if(!G(t))return qi(t);var e=De(t),r=[];for(var n in t)n=="constructor"&&(e||!dp.call(t,n))||r.push(n);return r}var Zi=mp;function gp(t){return Z(t)?en(t,!0):Zi(t)}var ft=gp;var xp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Tp=/^\w*$/;function Ep(t,e){if(A(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||it(t)?!0:Tp.test(t)||!xp.test(t)||e!=null&&t in Object(e)}var Gt=Ep;var Ap=xe(Object,"create"),Xe=Ap;function Ip(){this.__data__=Xe?Xe(null):{},this.size=0}var Qi=Ip;function yp(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Ji=yp;var Rp="__lodash_hash_undefined__",Sp=Object.prototype,Op=Sp.hasOwnProperty;function Np(t){var e=this.__data__;if(Xe){var r=e[t];return r===Rp?void 0:r}return Op.call(e,t)?e[t]:void 0}var es=Np;var _p=Object.prototype,Cp=_p.hasOwnProperty;function vp(t){var e=this.__data__;return Xe?e[t]!==void 0:Cp.call(e,t)}var ts=vp;var Lp="__lodash_hash_undefined__";function kp(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Xe&&e===void 0?Lp:e,this}var rs=kp;function Wt(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Wt.prototype.clear=Qi;Wt.prototype.delete=Ji;Wt.prototype.get=es;Wt.prototype.has=ts;Wt.prototype.set=rs;var mo=Wt;function bp(){this.__data__=[],this.size=0}var ns=bp;function Pp(t,e){for(var r=t.length;r--;)if(Fe(t[r][0],e))return r;return-1}var ut=Pp;var Mp=Array.prototype,wp=Mp.splice;function Fp(t){var e=this.__data__,r=ut(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():wp.call(e,r,1),--this.size,!0}var os=Fp;function Up(t){var e=this.__data__,r=ut(e,t);return r<0?void 0:e[r][1]}var is=Up;function Dp(t){return ut(this.__data__,t)>-1}var ss=Dp;function Bp(t,e){var r=this.__data__,n=ut(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var as=Bp;function $t(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}$t.prototype.clear=ns;$t.prototype.delete=os;$t.prototype.get=is;$t.prototype.has=ss;$t.prototype.set=as;var pt=$t;var Gp=xe(q,"Map"),ht=Gp;function Wp(){this.size=0,this.__data__={hash:new mo,map:new(ht||pt),string:new mo}}var ls=Wp;function $p(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var cs=$p;function jp(t,e){var r=t.__data__;return cs(e)?r[typeof e=="string"?"string":"hash"]:r.map}var dt=jp;function Kp(t){var e=dt(this,t).delete(t);return this.size-=e?1:0,e}var fs=Kp;function Hp(t){return dt(this,t).get(t)}var us=Hp;function zp(t){return dt(this,t).has(t)}var ps=zp;function Vp(t,e){var r=dt(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var hs=Vp;function jt(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}jt.prototype.clear=ls;jt.prototype.delete=fs;jt.prototype.get=us;jt.prototype.has=ps;jt.prototype.set=hs;var Rt=jt;var Xp="Expected a function";function go(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Xp);var r=function(){var n=arguments,o=e?e.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var s=t.apply(this,n);return r.cache=i.set(o,s)||i,s};return r.cache=new(go.Cache||Rt),r}go.Cache=Rt;var ds=go;var Yp=500;function qp(t){var e=ds(t,function(n){return r.size===Yp&&r.clear(),n}),r=e.cache;return e}var ms=qp;var Zp=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Qp=/\\(\\)?/g,Jp=ms(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Zp,function(r,n,o,i){e.push(o?i.replace(Qp,"$1"):n||r)}),e}),gs=Jp;function eh(t){return t==null?"":gi(t)}var xs=eh;function th(t,e){return A(t)?t:Gt(t,e)?[t]:gs(xs(t))}var mt=th;var rh=1/0;function nh(t){if(typeof t=="string"||it(t))return t;var e=t+"";return e=="0"&&1/t==-rh?"-0":e}var Ge=nh;function oh(t,e){e=mt(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[Ge(e[r++])];return r&&r==n?t:void 0}var Kt=oh;function ih(t,e,r){var n=t==null?void 0:Kt(t,e);return n===void 0?r:n}var Ts=ih;function sh(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}var Ht=sh;var Es=oe?oe.isConcatSpreadable:void 0;function ah(t){return A(t)||ct(t)||!!(Es&&t&&t[Es])}var As=ah;function Is(t,e,r,n,o){var i=-1,s=t.length;for(r||(r=As),o||(o=[]);++i<s;){var a=t[i];e>0&&r(a)?e>1?Is(a,e-1,r,n,o):Ht(o,a):n||(o[o.length]=a)}return o}var zt=Is;function lh(t){var e=t==null?0:t.length;return e?zt(t,1):[]}var te=lh;var ch=tn(Object.getPrototypeOf,Object),nn=ch;function fh(t,e,r){var n=-1,o=t.length;e<0&&(e=-e>o?0:o+e),r=r>o?o:r,r<0&&(r+=o),o=e>r?0:r-e>>>0,e>>>=0;for(var i=Array(o);++n<o;)i[n]=t[n+e];return i}var on=fh;function uh(t,e,r,n){var o=-1,i=t==null?0:t.length;for(n&&i&&(r=t[++o]);++o<i;)r=e(r,t[o],o,t);return r}var ys=uh;function ph(){this.__data__=new pt,this.size=0}var Rs=ph;function hh(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var Ss=hh;function dh(t){return this.__data__.get(t)}var Os=dh;function mh(t){return this.__data__.has(t)}var Ns=mh;var gh=200;function xh(t,e){var r=this.__data__;if(r instanceof pt){var n=r.__data__;if(!ht||n.length<gh-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Rt(n)}return r.set(t,e),this.size=r.size,this}var _s=xh;function Vt(t){var e=this.__data__=new pt(t);this.size=e.size}Vt.prototype.clear=Rs;Vt.prototype.delete=Ss;Vt.prototype.get=Os;Vt.prototype.has=Ns;Vt.prototype.set=_s;var gt=Vt;function Th(t,e){return t&&Ue(e,k(e),t)}var Cs=Th;function Eh(t,e){return t&&Ue(e,ft(e),t)}var vs=Eh;var Ps=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ls=Ps&&typeof module=="object"&&module&&!module.nodeType&&module,Ah=Ls&&Ls.exports===Ps,ks=Ah?q.Buffer:void 0,bs=ks?ks.allocUnsafe:void 0;function Ih(t,e){if(e)return t.slice();var r=t.length,n=bs?bs(r):new t.constructor(r);return t.copy(n),n}var Ms=Ih;function yh(t,e){for(var r=-1,n=t==null?0:t.length,o=0,i=[];++r<n;){var s=t[r];e(s,r,t)&&(i[o++]=s)}return i}var Xt=yh;function Rh(){return[]}var sn=Rh;var Sh=Object.prototype,Oh=Sh.propertyIsEnumerable,ws=Object.getOwnPropertySymbols,Nh=ws?function(t){return t==null?[]:(t=Object(t),Xt(ws(t),function(e){return Oh.call(t,e)}))}:sn,Yt=Nh;function _h(t,e){return Ue(t,Yt(t),e)}var Fs=_h;var Ch=Object.getOwnPropertySymbols,vh=Ch?function(t){for(var e=[];t;)Ht(e,Yt(t)),t=nn(t);return e}:sn,an=vh;function Lh(t,e){return Ue(t,an(t),e)}var Us=Lh;function kh(t,e,r){var n=e(t);return A(t)?n:Ht(n,r(t))}var ln=kh;function bh(t){return ln(t,k,Yt)}var yr=bh;function Ph(t){return ln(t,ft,an)}var cn=Ph;var Mh=xe(q,"DataView"),fn=Mh;var wh=xe(q,"Promise"),un=wh;var Fh=xe(q,"Set"),xt=Fh;var Ds="[object Map]",Uh="[object Object]",Bs="[object Promise]",Gs="[object Set]",Ws="[object WeakMap]",$s="[object DataView]",Dh=ze(fn),Bh=ze(ht),Gh=ze(un),Wh=ze(xt),$h=ze(qr),St=ue;(fn&&St(new fn(new ArrayBuffer(1)))!=$s||ht&&St(new ht)!=Ds||un&&St(un.resolve())!=Bs||xt&&St(new xt)!=Gs||qr&&St(new qr)!=Ws)&&(St=function(t){var e=ue(t),r=e==Uh?t.constructor:void 0,n=r?ze(r):"";if(n)switch(n){case Dh:return $s;case Bh:return Ds;case Gh:return Bs;case Wh:return Gs;case $h:return Ws}return e});var ve=St;var jh=Object.prototype,Kh=jh.hasOwnProperty;function Hh(t){var e=t.length,r=new t.constructor(e);return e&&typeof t[0]=="string"&&Kh.call(t,"index")&&(r.index=t.index,r.input=t.input),r}var js=Hh;var zh=q.Uint8Array,qt=zh;function Vh(t){var e=new t.constructor(t.byteLength);return new qt(e).set(new qt(t)),e}var Zt=Vh;function Xh(t,e){var r=e?Zt(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}var Ks=Xh;var Yh=/\w*$/;function qh(t){var e=new t.constructor(t.source,Yh.exec(t));return e.lastIndex=t.lastIndex,e}var Hs=qh;var zs=oe?oe.prototype:void 0,Vs=zs?zs.valueOf:void 0;function Zh(t){return Vs?Object(Vs.call(t)):{}}var Xs=Zh;function Qh(t,e){var r=e?Zt(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}var Ys=Qh;var Jh="[object Boolean]",ed="[object Date]",td="[object Map]",rd="[object Number]",nd="[object RegExp]",od="[object Set]",id="[object String]",sd="[object Symbol]",ad="[object ArrayBuffer]",ld="[object DataView]",cd="[object Float32Array]",fd="[object Float64Array]",ud="[object Int8Array]",pd="[object Int16Array]",hd="[object Int32Array]",dd="[object Uint8Array]",md="[object Uint8ClampedArray]",gd="[object Uint16Array]",xd="[object Uint32Array]";function Td(t,e,r){var n=t.constructor;switch(e){case ad:return Zt(t);case Jh:case ed:return new n(+t);case ld:return Ks(t,r);case cd:case fd:case ud:case pd:case hd:case dd:case md:case gd:case xd:return Ys(t,r);case td:return new n;case rd:case id:return new n(t);case nd:return Hs(t);case od:return new n;case sd:return Xs(t)}}var qs=Td;function Ed(t){return typeof t.constructor=="function"&&!De(t)?Ci(nn(t)):{}}var Zs=Ed;var Ad="[object Map]";function Id(t){return z(t)&&ve(t)==Ad}var Qs=Id;var Js=Ne&&Ne.isMap,yd=Js?Be(Js):Qs,ea=yd;var Rd="[object Set]";function Sd(t){return z(t)&&ve(t)==Rd}var ta=Sd;var ra=Ne&&Ne.isSet,Od=ra?Be(ra):ta,na=Od;var Nd=1,_d=2,Cd=4,oa="[object Arguments]",vd="[object Array]",Ld="[object Boolean]",kd="[object Date]",bd="[object Error]",ia="[object Function]",Pd="[object GeneratorFunction]",Md="[object Map]",wd="[object Number]",sa="[object Object]",Fd="[object RegExp]",Ud="[object Set]",Dd="[object String]",Bd="[object Symbol]",Gd="[object WeakMap]",Wd="[object ArrayBuffer]",$d="[object DataView]",jd="[object Float32Array]",Kd="[object Float64Array]",Hd="[object Int8Array]",zd="[object Int16Array]",Vd="[object Int32Array]",Xd="[object Uint8Array]",Yd="[object Uint8ClampedArray]",qd="[object Uint16Array]",Zd="[object Uint32Array]",b={};b[oa]=b[vd]=b[Wd]=b[$d]=b[Ld]=b[kd]=b[jd]=b[Kd]=b[Hd]=b[zd]=b[Vd]=b[Md]=b[wd]=b[sa]=b[Fd]=b[Ud]=b[Dd]=b[Bd]=b[Xd]=b[Yd]=b[qd]=b[Zd]=!0;b[bd]=b[ia]=b[Gd]=!1;function pn(t,e,r,n,o,i){var s,a=e&Nd,l=e&_d,c=e&Cd;if(r&&(s=o?r(t,n,o,i):r(t)),s!==void 0)return s;if(!G(t))return t;var f=A(t);if(f){if(s=js(t),!a)return Li(t,s)}else{var u=ve(t),p=u==ia||u==Pd;if(Ve(t))return Ms(t,a);if(u==sa||u==oa||p&&!o){if(s=l||p?{}:Zs(t),!a)return l?Us(t,vs(s,t)):Fs(t,Cs(s,t))}else{if(!b[u])return o?t:{};s=qs(t,u,a)}}i||(i=new gt);var x=i.get(t);if(x)return x;i.set(t,s),na(t)?t.forEach(function(S){s.add(pn(S,e,r,S,t,i))}):ea(t)&&t.forEach(function(S,E){s.set(E,pn(S,e,r,E,t,i))});var I=c?l?cn:yr:l?ft:k,y=f?void 0:I(t);return Zr(y||t,function(S,E){y&&(E=S,S=t[E]),at(s,E,pn(S,e,r,E,t,i))}),s}var aa=pn;var Qd=4;function Jd(t){return aa(t,Qd)}var P=Jd;function em(t){for(var e=-1,r=t==null?0:t.length,n=0,o=[];++e<r;){var i=t[e];i&&(o[n++]=i)}return o}var We=em;var tm="__lodash_hash_undefined__";function rm(t){return this.__data__.set(t,tm),this}var la=rm;function nm(t){return this.__data__.has(t)}var ca=nm;function hn(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new Rt;++e<r;)this.add(t[e])}hn.prototype.add=hn.prototype.push=la;hn.prototype.has=ca;var Qt=hn;function om(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var dn=om;function im(t,e){return t.has(e)}var Jt=im;var sm=1,am=2;function lm(t,e,r,n,o,i){var s=r&sm,a=t.length,l=e.length;if(a!=l&&!(s&&l>a))return!1;var c=i.get(t),f=i.get(e);if(c&&f)return c==e&&f==t;var u=-1,p=!0,x=r&am?new Qt:void 0;for(i.set(t,e),i.set(e,t);++u<a;){var I=t[u],y=e[u];if(n)var S=s?n(y,I,u,e,t,i):n(I,y,u,t,e,i);if(S!==void 0){if(S)continue;p=!1;break}if(x){if(!dn(e,function(E,m){if(!Jt(x,m)&&(I===E||o(I,E,r,n,i)))return x.push(m)})){p=!1;break}}else if(!(I===y||o(I,y,r,n,i))){p=!1;break}}return i.delete(t),i.delete(e),p}var mn=lm;function cm(t){var e=-1,r=Array(t.size);return t.forEach(function(n,o){r[++e]=[o,n]}),r}var fa=cm;function fm(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var er=fm;var um=1,pm=2,hm="[object Boolean]",dm="[object Date]",mm="[object Error]",gm="[object Map]",xm="[object Number]",Tm="[object RegExp]",Em="[object Set]",Am="[object String]",Im="[object Symbol]",ym="[object ArrayBuffer]",Rm="[object DataView]",ua=oe?oe.prototype:void 0,xo=ua?ua.valueOf:void 0;function Sm(t,e,r,n,o,i,s){switch(r){case Rm:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case ym:return!(t.byteLength!=e.byteLength||!i(new qt(t),new qt(e)));case hm:case dm:case xm:return Fe(+t,+e);case mm:return t.name==e.name&&t.message==e.message;case Tm:case Am:return t==e+"";case gm:var a=fa;case Em:var l=n&um;if(a||(a=er),t.size!=e.size&&!l)return!1;var c=s.get(t);if(c)return c==e;n|=pm,s.set(t,e);var f=mn(a(t),a(e),n,o,i,s);return s.delete(t),f;case Im:if(xo)return xo.call(t)==xo.call(e)}return!1}var pa=Sm;var Om=1,Nm=Object.prototype,_m=Nm.hasOwnProperty;function Cm(t,e,r,n,o,i){var s=r&Om,a=yr(t),l=a.length,c=yr(e),f=c.length;if(l!=f&&!s)return!1;for(var u=l;u--;){var p=a[u];if(!(s?p in e:_m.call(e,p)))return!1}var x=i.get(t),I=i.get(e);if(x&&I)return x==e&&I==t;var y=!0;i.set(t,e),i.set(e,t);for(var S=s;++u<l;){p=a[u];var E=t[p],m=e[p];if(n)var h=s?n(m,E,p,e,t,i):n(E,m,p,t,e,i);if(!(h===void 0?E===m||o(E,m,r,n,i):h)){y=!1;break}S||(S=p=="constructor")}if(y&&!S){var O=t.constructor,N=e.constructor;O!=N&&"constructor"in t&&"constructor"in e&&!(typeof O=="function"&&O instanceof O&&typeof N=="function"&&N instanceof N)&&(y=!1)}return i.delete(t),i.delete(e),y}var ha=Cm;var vm=1,da="[object Arguments]",ma="[object Array]",gn="[object Object]",Lm=Object.prototype,ga=Lm.hasOwnProperty;function km(t,e,r,n,o,i){var s=A(t),a=A(e),l=s?ma:ve(t),c=a?ma:ve(e);l=l==da?gn:l,c=c==da?gn:c;var f=l==gn,u=c==gn,p=l==c;if(p&&Ve(t)){if(!Ve(e))return!1;s=!0,f=!1}if(p&&!f)return i||(i=new gt),s||Bt(t)?mn(t,e,r,n,o,i):pa(t,e,l,r,n,o,i);if(!(r&vm)){var x=f&&ga.call(t,"__wrapped__"),I=u&&ga.call(e,"__wrapped__");if(x||I){var y=x?t.value():t,S=I?e.value():e;return i||(i=new gt),o(y,S,r,n,i)}}return p?(i||(i=new gt),ha(t,e,r,n,o,i)):!1}var xa=km;function Ta(t,e,r,n,o){return t===e?!0:t==null||e==null||!z(t)&&!z(e)?t!==t&&e!==e:xa(t,e,r,n,Ta,o)}var xn=Ta;var bm=1,Pm=2;function Mm(t,e,r,n){var o=r.length,i=o,s=!n;if(t==null)return!i;for(t=Object(t);o--;){var a=r[o];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++o<i;){a=r[o];var l=a[0],c=t[l],f=a[1];if(s&&a[2]){if(c===void 0&&!(l in t))return!1}else{var u=new gt;if(n)var p=n(c,f,l,t,e,u);if(!(p===void 0?xn(f,c,bm|Pm,n,u):p))return!1}}return!0}var Ea=Mm;function wm(t){return t===t&&!G(t)}var Tn=wm;function Fm(t){for(var e=k(t),r=e.length;r--;){var n=e[r],o=t[n];e[r]=[n,o,Tn(o)]}return e}var Aa=Fm;function Um(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}var En=Um;function Dm(t){var e=Aa(t);return e.length==1&&e[0][2]?En(e[0][0],e[0][1]):function(r){return r===t||Ea(r,t,e)}}var Ia=Dm;function Bm(t,e){return t!=null&&e in Object(t)}var ya=Bm;function Gm(t,e,r){e=mt(e,t);for(var n=-1,o=e.length,i=!1;++n<o;){var s=Ge(e[n]);if(!(i=t!=null&&r(t,s)))break;t=t[s]}return i||++n!=o?i:(o=t==null?0:t.length,!!o&&Dt(o)&&st(s,o)&&(A(t)||ct(t)))}var An=Gm;function Wm(t,e){return t!=null&&An(t,e,ya)}var Ra=Wm;var $m=1,jm=2;function Km(t,e){return Gt(t)&&Tn(e)?En(Ge(t),e):function(r){var n=Ts(r,t);return n===void 0&&n===e?Ra(r,t):xn(e,n,$m|jm)}}var Sa=Km;function Hm(t){return function(e){return e?.[t]}}var Oa=Hm;function zm(t){return function(e){return Kt(e,t)}}var Na=zm;function Vm(t){return Gt(t)?Oa(Ge(t)):Na(t)}var _a=Vm;function Xm(t){return typeof t=="function"?t:t==null?Oe:typeof t=="object"?A(t)?Sa(t[0],t[1]):Ia(t):_a(t)}var Q=Xm;function Ym(t,e,r,n){for(var o=-1,i=t==null?0:t.length;++o<i;){var s=t[o];e(n,s,r(s),t)}return n}var Ca=Ym;function qm(t){return function(e,r,n){for(var o=-1,i=Object(e),s=n(e),a=s.length;a--;){var l=s[t?a:++o];if(r(i[l],l,i)===!1)break}return e}}var va=qm;var Zm=va(),La=Zm;function Qm(t,e){return t&&La(t,e,k)}var ka=Qm;function Jm(t,e){return function(r,n){if(r==null)return r;if(!Z(r))return t(r,n);for(var o=r.length,i=e?o:-1,s=Object(r);(e?i--:++i<o)&&n(s[i],i,s)!==!1;);return r}}var ba=Jm;var eg=ba(ka),Te=eg;function tg(t,e,r,n){return Te(t,function(o,i,s){e(n,o,r(o),s)}),n}var Pa=tg;function rg(t,e){return function(r,n){var o=A(r)?Ca:Pa,i=e?e():{};return o(r,t,Q(n,2),i)}}var Ma=rg;var wa=Object.prototype,ng=wa.hasOwnProperty,og=Ut(function(t,e){t=Object(t);var r=-1,n=e.length,o=n>2?e[2]:void 0;for(o&&lt(e[0],e[1],o)&&(n=1);++r<n;)for(var i=e[r],s=ft(i),a=-1,l=s.length;++a<l;){var c=s[a],f=t[c];(f===void 0||Fe(f,wa[c])&&!ng.call(t,c))&&(t[c]=i[c])}return t}),tr=og;function ig(t){return z(t)&&Z(t)}var To=ig;function sg(t,e,r){for(var n=-1,o=t==null?0:t.length;++n<o;)if(r(e,t[n]))return!0;return!1}var In=sg;var ag=200;function lg(t,e,r,n){var o=-1,i=Jr,s=!0,a=t.length,l=[],c=e.length;if(!a)return l;r&&(e=Me(e,Be(r))),n?(i=In,s=!1):e.length>=ag&&(i=Jt,s=!1,e=new Qt(e));e:for(;++o<a;){var f=t[o],u=r==null?f:r(f);if(f=n||f!==0?f:0,s&&u===u){for(var p=c;p--;)if(e[p]===u)continue e;l.push(f)}else i(e,u,n)||l.push(f)}return l}var Fa=lg;var cg=Ut(function(t,e){return To(t)?Fa(t,zt(e,1,To,!0)):[]}),Tt=cg;function fg(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var Le=fg;function ug(t,e,r){var n=t==null?0:t.length;return n?(e=r||e===void 0?1:we(e),on(t,e<0?0:e,n)):[]}var V=ug;function pg(t,e,r){var n=t==null?0:t.length;return n?(e=r||e===void 0?1:we(e),e=n-e,on(t,0,e<0?0:e)):[]}var Ye=pg;function hg(t){return typeof t=="function"?t:Oe}var Ua=hg;function dg(t,e){var r=A(t)?Zr:Te;return r(t,Ua(e))}var g=dg;function mg(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(!e(t[r],r,t))return!1;return!0}var Da=mg;function gg(t,e){var r=!0;return Te(t,function(n,o,i){return r=!!e(n,o,i),r}),r}var Ba=gg;function xg(t,e,r){var n=A(t)?Da:Ba;return r&&lt(t,e,r)&&(e=void 0),n(t,Q(e,3))}var le=xg;function Tg(t,e){var r=[];return Te(t,function(n,o,i){e(n,o,i)&&r.push(n)}),r}var yn=Tg;function Eg(t,e){var r=A(t)?Xt:yn;return r(t,Q(e,3))}var ce=Eg;function Ag(t){return function(e,r,n){var o=Object(e);if(!Z(e)){var i=Q(r,3);e=k(e),r=function(a){return i(o[a],a,o)}}var s=t(e,r,n);return s>-1?o[i?e[s]:s]:void 0}}var Ga=Ag;var Ig=Math.max;function yg(t,e,r){var n=t==null?0:t.length;if(!n)return-1;var o=r==null?0:we(r);return o<0&&(o=Ig(n+o,0)),Qr(t,Q(e,3),o)}var Wa=yg;var Rg=Ga(Wa),$e=Rg;function Sg(t){return t&&t.length?t[0]:void 0}var ie=Sg;function Og(t,e){var r=-1,n=Z(t)?Array(t.length):[];return Te(t,function(o,i,s){n[++r]=e(o,i,s)}),n}var $a=Og;function Ng(t,e){var r=A(t)?Me:$a;return r(t,Q(e,3))}var d=Ng;function _g(t,e){return zt(d(t,e),1)}var he=_g;var Cg=Object.prototype,vg=Cg.hasOwnProperty,Lg=Ma(function(t,e,r){vg.call(t,r)?t[r].push(e):Ft(t,r,[e])}),Eo=Lg;var kg=Object.prototype,bg=kg.hasOwnProperty;function Pg(t,e){return t!=null&&bg.call(t,e)}var ja=Pg;function Mg(t,e){return t!=null&&An(t,e,ja)}var T=Mg;var wg="[object String]";function Fg(t){return typeof t=="string"||!A(t)&&z(t)&&ue(t)==wg}var re=Fg;function Ug(t,e){return Me(e,function(r){return t[r]})}var Ka=Ug;function Dg(t){return t==null?[]:Ka(t,k(t))}var L=Dg;var Bg=Math.max;function Gg(t,e,r,n){t=Z(t)?t:L(t),r=r&&!n?we(r):0;var o=t.length;return r<0&&(r=Bg(o+r,0)),re(t)?r<=o&&t.indexOf(e,r)>-1:!!o&&wt(t,e,r)>-1}var D=Gg;var Wg=Math.max;function $g(t,e,r){var n=t==null?0:t.length;if(!n)return-1;var o=r==null?0:we(r);return o<0&&(o=Wg(n+o,0)),wt(t,e,o)}var Rn=$g;var jg="[object Map]",Kg="[object Set]",Hg=Object.prototype,zg=Hg.hasOwnProperty;function Vg(t){if(t==null)return!0;if(Z(t)&&(A(t)||typeof t=="string"||typeof t.splice=="function"||Ve(t)||Bt(t)||ct(t)))return!t.length;var e=ve(t);if(e==jg||e==Kg)return!t.size;if(De(t))return!rn(t).length;for(var r in t)if(zg.call(t,r))return!1;return!0}var _=Vg;var Xg="[object RegExp]";function Yg(t){return z(t)&&ue(t)==Xg}var Ha=Yg;var za=Ne&&Ne.isRegExp,qg=za?Be(za):Ha,_e=qg;function Zg(t){return t===void 0}var fe=Zg;var Qg="Expected a function";function Jg(t){if(typeof t!="function")throw new TypeError(Qg);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}var Va=Jg;function ex(t,e,r,n){if(!G(t))return t;e=mt(e,t);for(var o=-1,i=e.length,s=i-1,a=t;a!=null&&++o<i;){var l=Ge(e[o]),c=r;if(l==="__proto__"||l==="constructor"||l==="prototype")return t;if(o!=s){var f=a[l];c=n?n(f,l,a):void 0,c===void 0&&(c=G(f)?f:st(e[o+1])?[]:{})}at(a,l,c),a=a[l]}return t}var Xa=ex;function tx(t,e,r){for(var n=-1,o=e.length,i={};++n<o;){var s=e[n],a=Kt(t,s);r(a,s)&&Xa(i,mt(s,t),a)}return i}var Ya=tx;function rx(t,e){if(t==null)return{};var r=Me(cn(t),function(n){return[n]});return e=Q(e),Ya(t,r,function(n,o){return e(n,o[0])})}var Ee=rx;function nx(t,e,r,n,o){return o(t,function(i,s,a){r=n?(n=!1,i):e(r,i,s,a)}),r}var qa=nx;function ox(t,e,r){var n=A(t)?ys:qa,o=arguments.length<3;return n(t,Q(e,4),r,o,Te)}var J=ox;function ix(t,e){var r=A(t)?Xt:yn;return r(t,Va(Q(e,3)))}var Et=ix;function sx(t,e){var r;return Te(t,function(n,o,i){return r=e(n,o,i),!r}),!!r}var Za=sx;function ax(t,e,r){var n=A(t)?dn:Za;return r&&lt(t,e,r)&&(e=void 0),n(t,Q(e,3))}var Rr=ax;var lx=1/0,cx=xt&&1/er(new xt([,-0]))[1]==lx?function(t){return new xt(t)}:W,Qa=cx;var fx=200;function ux(t,e,r){var n=-1,o=Jr,i=t.length,s=!0,a=[],l=a;if(r)s=!1,o=In;else if(i>=fx){var c=e?null:Qa(t);if(c)return er(c);s=!1,o=Jt,l=new Qt}else l=e?[]:a;e:for(;++n<i;){var f=t[n],u=e?e(f):f;if(f=r||f!==0?f:0,s&&u===u){for(var p=l.length;p--;)if(l[p]===u)continue e;e&&l.push(u),a.push(f)}else o(l,u,r)||(l!==a&&l.push(u),a.push(f))}return a}var Ja=ux;function px(t){return t&&t.length?Ja(t):[]}var rr=px;function nr(t){console&&console.error&&console.error(`Error: ${t}`)}function Sr(t){console&&console.warn&&console.warn(`Warning: ${t}`)}function Or(t){let e=new Date().getTime(),r=t();return{time:new Date().getTime()-e,value:r}}function Nr(t){function e(){}e.prototype=t;let r=new e;function n(){return typeof r.bar}return n(),n(),t;(0,eval)(t)}function hx(t){return dx(t)?t.LABEL:t.name}function dx(t){return re(t.LABEL)&&t.LABEL!==""}var Re=class{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){this._definition=e}accept(e){e.visit(this),g(this.definition,r=>{r.accept(e)})}},M=class extends Re{constructor(e){super([]),this.idx=1,se(this,Ee(e,r=>r!==void 0))}set definition(e){}get definition(){return this.referencedRule!==void 0?this.referencedRule.definition:[]}accept(e){e.visit(this)}},de=class extends Re{constructor(e){super(e.definition),this.orgText="",se(this,Ee(e,r=>r!==void 0))}},w=class extends Re{constructor(e){super(e.definition),this.ignoreAmbiguities=!1,se(this,Ee(e,r=>r!==void 0))}},U=class extends Re{constructor(e){super(e.definition),this.idx=1,se(this,Ee(e,r=>r!==void 0))}},X=class extends Re{constructor(e){super(e.definition),this.idx=1,se(this,Ee(e,r=>r!==void 0))}},Y=class extends Re{constructor(e){super(e.definition),this.idx=1,se(this,Ee(e,r=>r!==void 0))}},v=class extends Re{constructor(e){super(e.definition),this.idx=1,se(this,Ee(e,r=>r!==void 0))}},j=class extends Re{constructor(e){super(e.definition),this.idx=1,se(this,Ee(e,r=>r!==void 0))}},K=class extends Re{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){super(e.definition),this.idx=1,this.ignoreAmbiguities=!1,this.hasPredicates=!1,se(this,Ee(e,r=>r!==void 0))}},C=class{constructor(e){this.idx=1,se(this,Ee(e,r=>r!==void 0))}accept(e){e.visit(this)}};function Sn(t){return d(t,or)}function or(t){function e(r){return d(r,or)}if(t instanceof M){let r={type:"NonTerminal",name:t.nonTerminalName,idx:t.idx};return re(t.label)&&(r.label=t.label),r}else{if(t instanceof w)return{type:"Alternative",definition:e(t.definition)};if(t instanceof U)return{type:"Option",idx:t.idx,definition:e(t.definition)};if(t instanceof X)return{type:"RepetitionMandatory",idx:t.idx,definition:e(t.definition)};if(t instanceof Y)return{type:"RepetitionMandatoryWithSeparator",idx:t.idx,separator:or(new C({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof j)return{type:"RepetitionWithSeparator",idx:t.idx,separator:or(new C({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof v)return{type:"Repetition",idx:t.idx,definition:e(t.definition)};if(t instanceof K)return{type:"Alternation",idx:t.idx,definition:e(t.definition)};if(t instanceof C){let r={type:"Terminal",name:t.terminalType.name,label:hx(t.terminalType),idx:t.idx};re(t.label)&&(r.terminalLabel=t.label);let n=t.terminalType.PATTERN;return t.terminalType.PATTERN&&(r.pattern=_e(n)?n.source:n),r}else{if(t instanceof de)return{type:"Rule",name:t.name,orgText:t.orgText,definition:e(t.definition)};throw Error("non exhaustive match")}}}var me=class{visit(e){let r=e;switch(r.constructor){case M:return this.visitNonTerminal(r);case w:return this.visitAlternative(r);case U:return this.visitOption(r);case X:return this.visitRepetitionMandatory(r);case Y:return this.visitRepetitionMandatoryWithSeparator(r);case j:return this.visitRepetitionWithSeparator(r);case v:return this.visitRepetition(r);case K:return this.visitAlternation(r);case C:return this.visitTerminal(r);case de:return this.visitRule(r);default:throw Error("non exhaustive match")}}visitNonTerminal(e){}visitAlternative(e){}visitOption(e){}visitRepetition(e){}visitRepetitionMandatory(e){}visitRepetitionMandatoryWithSeparator(e){}visitRepetitionWithSeparator(e){}visitAlternation(e){}visitTerminal(e){}visitRule(e){}};function Ao(t){return t instanceof w||t instanceof U||t instanceof v||t instanceof X||t instanceof Y||t instanceof j||t instanceof C||t instanceof de}function Ot(t,e=[]){return t instanceof U||t instanceof v||t instanceof j?!0:t instanceof K?Rr(t.definition,n=>Ot(n,e)):t instanceof M&&D(e,t)?!1:t instanceof Re?(t instanceof M&&e.push(t),le(t.definition,n=>Ot(n,e))):!1}function Io(t){return t instanceof K}function Ae(t){if(t instanceof M)return"SUBRULE";if(t instanceof U)return"OPTION";if(t instanceof K)return"OR";if(t instanceof X)return"AT_LEAST_ONE";if(t instanceof Y)return"AT_LEAST_ONE_SEP";if(t instanceof j)return"MANY_SEP";if(t instanceof v)return"MANY";if(t instanceof C)return"CONSUME";throw Error("non exhaustive match")}var qe=class{walk(e,r=[]){g(e.definition,(n,o)=>{let i=V(e.definition,o+1);if(n instanceof M)this.walkProdRef(n,i,r);else if(n instanceof C)this.walkTerminal(n,i,r);else if(n instanceof w)this.walkFlat(n,i,r);else if(n instanceof U)this.walkOption(n,i,r);else if(n instanceof X)this.walkAtLeastOne(n,i,r);else if(n instanceof Y)this.walkAtLeastOneSep(n,i,r);else if(n instanceof j)this.walkManySep(n,i,r);else if(n instanceof v)this.walkMany(n,i,r);else if(n instanceof K)this.walkOr(n,i,r);else throw Error("non exhaustive match")})}walkTerminal(e,r,n){}walkProdRef(e,r,n){}walkFlat(e,r,n){let o=r.concat(n);this.walk(e,o)}walkOption(e,r,n){let o=r.concat(n);this.walk(e,o)}walkAtLeastOne(e,r,n){let o=[new U({definition:e.definition})].concat(r,n);this.walk(e,o)}walkAtLeastOneSep(e,r,n){let o=el(e,r,n);this.walk(e,o)}walkMany(e,r,n){let o=[new U({definition:e.definition})].concat(r,n);this.walk(e,o)}walkManySep(e,r,n){let o=el(e,r,n);this.walk(e,o)}walkOr(e,r,n){let o=r.concat(n);g(e.definition,i=>{let s=new w({definition:[i]});this.walk(s,o)})}};function el(t,e,r){return[new U({definition:[new C({terminalType:t.separator})].concat(t.definition)})].concat(e,r)}function Nt(t){if(t instanceof M)return Nt(t.referencedRule);if(t instanceof C)return xx(t);if(Ao(t))return mx(t);if(Io(t))return gx(t);throw Error("non exhaustive match")}function mx(t){let e=[],r=t.definition,n=0,o=r.length>n,i,s=!0;for(;o&&s;)i=r[n],s=Ot(i),e=e.concat(Nt(i)),n=n+1,o=r.length>n;return rr(e)}function gx(t){let e=d(t.definition,r=>Nt(r));return rr(te(e))}function xx(t){return[t.terminalType]}var On="_~IN~_";var yo=class extends qe{constructor(e){super(),this.topProd=e,this.follows={}}startWalking(){return this.walk(this.topProd),this.follows}walkTerminal(e,r,n){}walkProdRef(e,r,n){let o=Tx(e.referencedRule,e.idx)+this.topProd.name,i=r.concat(n),s=new w({definition:i}),a=Nt(s);this.follows[o]=a}};function tl(t){let e={};return g(t,r=>{let n=new yo(r).startWalking();se(e,n)}),e}function Tx(t,e){return t.name+e+On}function R(t){return t.charCodeAt(0)}function Nn(t,e){Array.isArray(t)?t.forEach(function(r){e.push(r)}):e.push(t)}function ir(t,e){if(t[e]===!0)throw"duplicate flag "+e;let r=t[e];t[e]=!0}function _t(t){if(t===void 0)throw Error("Internal Error - Should never get here!");return!0}function _r(){throw Error("Internal Error - Should never get here!")}function Ro(t){return t.type==="Character"}var Cr=[];for(let t=R("0");t<=R("9");t++)Cr.push(t);var vr=[R("_")].concat(Cr);for(let t=R("a");t<=R("z");t++)vr.push(t);for(let t=R("A");t<=R("Z");t++)vr.push(t);var So=[R(" "),R("\f"),R(`
`),R("\r"),R("	"),R("\v"),R("	"),R("\xA0"),R("\u1680"),R("\u2000"),R("\u2001"),R("\u2002"),R("\u2003"),R("\u2004"),R("\u2005"),R("\u2006"),R("\u2007"),R("\u2008"),R("\u2009"),R("\u200A"),R("\u2028"),R("\u2029"),R("\u202F"),R("\u205F"),R("\u3000"),R("\uFEFF")];var Ex=/[0-9a-fA-F]/,_n=/[0-9]/,Ax=/[1-9]/,Lr=class{constructor(){this.idx=0,this.input="",this.groupIdx=0}saveState(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}}restoreState(e){this.idx=e.idx,this.input=e.input,this.groupIdx=e.groupIdx}pattern(e){this.idx=0,this.input=e,this.groupIdx=0,this.consumeChar("/");let r=this.disjunction();this.consumeChar("/");let n={type:"Flags",loc:{begin:this.idx,end:e.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};for(;this.isRegExpFlag();)switch(this.popChar()){case"g":ir(n,"global");break;case"i":ir(n,"ignoreCase");break;case"m":ir(n,"multiLine");break;case"u":ir(n,"unicode");break;case"y":ir(n,"sticky");break}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:n,value:r,loc:this.loc(0)}}disjunction(){let e=[],r=this.idx;for(e.push(this.alternative());this.peekChar()==="|";)this.consumeChar("|"),e.push(this.alternative());return{type:"Disjunction",value:e,loc:this.loc(r)}}alternative(){let e=[],r=this.idx;for(;this.isTerm();)e.push(this.term());return{type:"Alternative",value:e,loc:this.loc(r)}}term(){return this.isAssertion()?this.assertion():this.atom()}assertion(){let e=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(e)};case"$":return{type:"EndAnchor",loc:this.loc(e)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(e)};case"B":return{type:"NonWordBoundary",loc:this.loc(e)}}throw Error("Invalid Assertion Escape");case"(":this.consumeChar("?");let r;switch(this.popChar()){case"=":r="Lookahead";break;case"!":r="NegativeLookahead";break;case"<":{switch(this.popChar()){case"=":r="Lookbehind";break;case"!":r="NegativeLookbehind"}break}}_t(r);let n=this.disjunction();return this.consumeChar(")"),{type:r,value:n,loc:this.loc(e)}}return _r()}quantifier(e=!1){let r,n=this.idx;switch(this.popChar()){case"*":r={atLeast:0,atMost:1/0};break;case"+":r={atLeast:1,atMost:1/0};break;case"?":r={atLeast:0,atMost:1};break;case"{":let o=this.integerIncludingZero();switch(this.popChar()){case"}":r={atLeast:o,atMost:o};break;case",":let i;this.isDigit()?(i=this.integerIncludingZero(),r={atLeast:o,atMost:i}):r={atLeast:o,atMost:1/0},this.consumeChar("}");break}if(e===!0&&r===void 0)return;_t(r);break}if(!(e===!0&&r===void 0)&&_t(r))return this.peekChar(0)==="?"?(this.consumeChar("?"),r.greedy=!1):r.greedy=!0,r.type="Quantifier",r.loc=this.loc(n),r}atom(){let e,r=this.idx;switch(this.peekChar()){case".":e=this.dotAll();break;case"\\":e=this.atomEscape();break;case"[":e=this.characterClass();break;case"(":e=this.group();break}return e===void 0&&this.isPatternCharacter()&&(e=this.patternCharacter()),_t(e)?(e.loc=this.loc(r),this.isQuantifier()&&(e.quantifier=this.quantifier()),e):_r()}dotAll(){return this.consumeChar("."),{type:"Set",complement:!0,value:[R(`
`),R("\r"),R("\u2028"),R("\u2029")]}}atomEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}decimalEscapeAtom(){return{type:"GroupBackReference",value:this.positiveInteger()}}characterClassEscape(){let e,r=!1;switch(this.popChar()){case"d":e=Cr;break;case"D":e=Cr,r=!0;break;case"s":e=So;break;case"S":e=So,r=!0;break;case"w":e=vr;break;case"W":e=vr,r=!0;break}return _t(e)?{type:"Set",value:e,complement:r}:_r()}controlEscapeAtom(){let e;switch(this.popChar()){case"f":e=R("\f");break;case"n":e=R(`
`);break;case"r":e=R("\r");break;case"t":e=R("	");break;case"v":e=R("\v");break}return _t(e)?{type:"Character",value:e}:_r()}controlLetterEscapeAtom(){this.consumeChar("c");let e=this.popChar();if(/[a-zA-Z]/.test(e)===!1)throw Error("Invalid ");return{type:"Character",value:e.toUpperCase().charCodeAt(0)-64}}nulCharacterAtom(){return this.consumeChar("0"),{type:"Character",value:R("\0")}}hexEscapeSequenceAtom(){return this.consumeChar("x"),this.parseHexDigits(2)}regExpUnicodeEscapeSequenceAtom(){return this.consumeChar("u"),this.parseHexDigits(4)}identityEscapeAtom(){let e=this.popChar();return{type:"Character",value:R(e)}}classPatternCharacterAtom(){switch(this.peekChar()){case`
`:case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:let e=this.popChar();return{type:"Character",value:R(e)}}}characterClass(){let e=[],r=!1;for(this.consumeChar("["),this.peekChar(0)==="^"&&(this.consumeChar("^"),r=!0);this.isClassAtom();){let n=this.classAtom(),o=n.type==="Character";if(Ro(n)&&this.isRangeDash()){this.consumeChar("-");let i=this.classAtom(),s=i.type==="Character";if(Ro(i)){if(i.value<n.value)throw Error("Range out of order in character class");e.push({from:n.value,to:i.value})}else Nn(n.value,e),e.push(R("-")),Nn(i.value,e)}else Nn(n.value,e)}return this.consumeChar("]"),{type:"Set",complement:r,value:e}}classAtom(){switch(this.peekChar()){case"]":case`
`:case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}}classEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:R("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}group(){let e=!0;this.consumeChar("("),this.peekChar(0)==="?"?(this.consumeChar("?"),this.consumeChar(":"),e=!1):this.groupIdx++;let r=this.disjunction();this.consumeChar(")");let n={type:"Group",capturing:e,value:r};return e&&(n.idx=this.groupIdx),n}positiveInteger(){let e=this.popChar();if(Ax.test(e)===!1)throw Error("Expecting a positive integer");for(;_n.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}integerIncludingZero(){let e=this.popChar();if(_n.test(e)===!1)throw Error("Expecting an integer");for(;_n.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}patternCharacter(){let e=this.popChar();switch(e){case`
`:case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:R(e)}}}isRegExpFlag(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}}isRangeDash(){return this.peekChar()==="-"&&this.isClassAtom(1)}isDigit(){return _n.test(this.peekChar(0))}isClassAtom(e=0){switch(this.peekChar(e)){case"]":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}isTerm(){return this.isAtom()||this.isAssertion()}isAtom(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}}isAssertion(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return this.peekChar(1)==="?"&&(this.peekChar(2)==="="||this.peekChar(2)==="!"||this.peekChar(2)==="<"&&(this.peekChar(3)==="="||this.peekChar(3)==="!"));default:return!1}}isQuantifier(){let e=this.saveState();try{return this.quantifier(!0)!==void 0}catch{return!1}finally{this.restoreState(e)}}isPatternCharacter(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}parseHexDigits(e){let r="";for(let o=0;o<e;o++){let i=this.popChar();if(Ex.test(i)===!1)throw Error("Expecting a HexDecimal digits");r+=i}return{type:"Character",value:parseInt(r,16)}}peekChar(e=0){return this.input[this.idx+e]}popChar(){let e=this.peekChar(0);return this.consumeChar(void 0),e}consumeChar(e){if(e!==void 0&&this.input[this.idx]!==e)throw Error("Expected: '"+e+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++}loc(e){return{begin:e,end:this.idx}}};var At=class{visitChildren(e){for(let r in e){let n=e[r];e.hasOwnProperty(r)&&(n.type!==void 0?this.visit(n):Array.isArray(n)&&n.forEach(o=>{this.visit(o)},this))}}visit(e){switch(e.type){case"Pattern":this.visitPattern(e);break;case"Flags":this.visitFlags(e);break;case"Disjunction":this.visitDisjunction(e);break;case"Alternative":this.visitAlternative(e);break;case"StartAnchor":this.visitStartAnchor(e);break;case"EndAnchor":this.visitEndAnchor(e);break;case"WordBoundary":this.visitWordBoundary(e);break;case"NonWordBoundary":this.visitNonWordBoundary(e);break;case"Lookahead":this.visitLookahead(e);break;case"NegativeLookahead":this.visitNegativeLookahead(e);break;case"Lookbehind":this.visitLookbehind(e);break;case"NegativeLookbehind":this.visitNegativeLookbehind(e);break;case"Character":this.visitCharacter(e);break;case"Set":this.visitSet(e);break;case"Group":this.visitGroup(e);break;case"GroupBackReference":this.visitGroupBackReference(e);break;case"Quantifier":this.visitQuantifier(e);break}this.visitChildren(e)}visitPattern(e){}visitFlags(e){}visitDisjunction(e){}visitAlternative(e){}visitStartAnchor(e){}visitEndAnchor(e){}visitWordBoundary(e){}visitNonWordBoundary(e){}visitLookahead(e){}visitNegativeLookahead(e){}visitLookbehind(e){}visitNegativeLookbehind(e){}visitCharacter(e){}visitSet(e){}visitGroup(e){}visitGroupBackReference(e){}visitQuantifier(e){}};var Cn={},Ix=new Lr;function sr(t){let e=t.toString();if(Cn.hasOwnProperty(e))return Cn[e];{let r=Ix.pattern(e);return Cn[e]=r,r}}function rl(){Cn={}}var ol="Complement Sets are not supported for first char optimization",kr=`Unable to use "first char" lexer optimizations:
`;function il(t,e=!1){try{let r=sr(t);return Oo(r.value,{},r.flags.ignoreCase)}catch(r){if(r.message===ol)e&&Sr(`${kr}	Unable to optimize: < ${t.toString()} >
	Complement Sets cannot be automatically optimized.
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.`);else{let n="";e&&(n=`
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details.`),nr(`${kr}
	Failed parsing: < ${t.toString()} >
	Using the @chevrotain/regexp-to-ast library
	Please open an issue at: https://github.com/chevrotain/chevrotain/issues`+n)}}return[]}function Oo(t,e,r){switch(t.type){case"Disjunction":for(let o=0;o<t.value.length;o++)Oo(t.value[o],e,r);break;case"Alternative":let n=t.value;for(let o=0;o<n.length;o++){let i=n[o];switch(i.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"Lookbehind":case"NegativeLookbehind":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}let s=i;switch(s.type){case"Character":vn(s.value,e,r);break;case"Set":if(s.complement===!0)throw Error(ol);g(s.value,l=>{if(typeof l=="number")vn(l,e,r);else{let c=l;if(r===!0)for(let f=c.from;f<=c.to;f++)vn(f,e,r);else{for(let f=c.from;f<=c.to&&f<ar;f++)vn(f,e,r);if(c.to>=ar){let f=c.from>=ar?c.from:ar,u=c.to,p=je(f),x=je(u);for(let I=p;I<=x;I++)e[I]=I}}}});break;case"Group":Oo(s.value,e,r);break;default:throw Error("Non Exhaustive Match")}let a=s.quantifier!==void 0&&s.quantifier.atLeast===0;if(s.type==="Group"&&No(s)===!1||s.type!=="Group"&&a===!1)break}break;default:throw Error("non exhaustive match!")}return L(e)}function vn(t,e,r){let n=je(t);e[n]=n,r===!0&&yx(t,e)}function yx(t,e){let r=String.fromCharCode(t),n=r.toUpperCase();if(n!==r){let o=je(n.charCodeAt(0));e[o]=o}else{let o=r.toLowerCase();if(o!==r){let i=je(o.charCodeAt(0));e[i]=i}}}function nl(t,e){return $e(t.value,r=>{if(typeof r=="number")return D(e,r);{let n=r;return $e(e,o=>n.from<=o&&o<=n.to)!==void 0}})}function No(t){let e=t.quantifier;return e&&e.atLeast===0?!0:t.value?A(t.value)?le(t.value,No):No(t.value):!1}var _o=class extends At{constructor(e){super(),this.targetCharCodes=e,this.found=!1}visitChildren(e){if(this.found!==!0){switch(e.type){case"Lookahead":this.visitLookahead(e);return;case"NegativeLookahead":this.visitNegativeLookahead(e);return;case"Lookbehind":this.visitLookbehind(e);return;case"NegativeLookbehind":this.visitNegativeLookbehind(e);return}super.visitChildren(e)}}visitCharacter(e){D(this.targetCharCodes,e.value)&&(this.found=!0)}visitSet(e){e.complement?nl(e,this.targetCharCodes)===void 0&&(this.found=!0):nl(e,this.targetCharCodes)!==void 0&&(this.found=!0)}};function Ln(t,e){if(e instanceof RegExp){let r=sr(e),n=new _o(t);return n.visit(r),n.found}else return $e(e,r=>D(t,r.charCodeAt(0)))!==void 0}var Ct="PATTERN",lr="defaultMode",kn="modes",vo=typeof new RegExp("(?:)").sticky=="boolean";function ll(t,e){e=tr(e,{useSticky:vo,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r",`
`],tracer:(m,h)=>h()});let r=e.tracer;r("initCharCodeToOptimizedIndexMap",()=>{Wx()});let n;r("Reject Lexer.NA",()=>{n=Et(t,m=>m[Ct]===H.NA)});let o=!1,i;r("Transform Patterns",()=>{o=!1,i=d(n,m=>{let h=m[Ct];if(_e(h)){let O=h.source;return O.length===1&&O!=="^"&&O!=="$"&&O!=="."&&!h.ignoreCase?O:O.length===2&&O[0]==="\\"&&!D(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],O[1])?O[1]:e.useSticky?al(h):sl(h)}else{if(pe(h))return o=!0,{exec:h};if(typeof h=="object")return o=!0,h;if(typeof h=="string"){if(h.length===1)return h;{let O=h.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),N=new RegExp(O);return e.useSticky?al(N):sl(N)}}else throw Error("non exhaustive match")}})});let s,a,l,c,f;r("misc mapping",()=>{s=d(n,m=>m.tokenTypeIdx),a=d(n,m=>{let h=m.GROUP;if(h!==H.SKIPPED){if(re(h))return h;if(fe(h))return!1;throw Error("non exhaustive match")}}),l=d(n,m=>{let h=m.LONGER_ALT;if(h)return A(h)?d(h,N=>Rn(n,N)):[Rn(n,h)]}),c=d(n,m=>m.PUSH_MODE),f=d(n,m=>T(m,"POP_MODE"))});let u;r("Line Terminator Handling",()=>{let m=gl(e.lineTerminatorCharacters);u=d(n,h=>!1),e.positionTracking!=="onlyOffset"&&(u=d(n,h=>T(h,"LINE_BREAKS")?!!h.LINE_BREAKS:ml(h,m)===!1&&Ln(m,h.PATTERN)))});let p,x,I,y;r("Misc Mapping #2",()=>{p=d(n,hl),x=d(i,Bx),I=J(n,(m,h)=>{let O=h.GROUP;return re(O)&&O!==H.SKIPPED&&(m[O]=[]),m},{}),y=d(i,(m,h)=>({pattern:i[h],longerAlt:l[h],canLineTerminator:u[h],isCustom:p[h],short:x[h],group:a[h],push:c[h],pop:f[h],tokenTypeIdx:s[h],tokenType:n[h]}))});let S=!0,E=[];return e.safeMode||r("First Char Optimization",()=>{E=J(n,(m,h,O)=>{if(typeof h.PATTERN=="string"){let N=h.PATTERN.charCodeAt(0),Ie=je(N);Co(m,Ie,y[O])}else if(A(h.START_CHARS_HINT)){let N;g(h.START_CHARS_HINT,Ie=>{let ao=typeof Ie=="string"?Ie.charCodeAt(0):Ie,Pe=je(ao);N!==Pe&&(N=Pe,Co(m,Pe,y[O]))})}else if(_e(h.PATTERN))if(h.PATTERN.unicode)S=!1,e.ensureOptimizations&&nr(`${kr}	Unable to analyze < ${h.PATTERN.toString()} > pattern.
	The regexp unicode flag is not currently supported by the regexp-to-ast library.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE`);else{let N=il(h.PATTERN,e.ensureOptimizations);_(N)&&(S=!1),g(N,Ie=>{Co(m,Ie,y[O])})}else e.ensureOptimizations&&nr(`${kr}	TokenType: <${h.name}> is using a custom token pattern without providing <start_chars_hint> parameter.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE`),S=!1;return m},[])}),{emptyGroups:I,patternIdxToConfig:y,charCodeToPatternIdxToConfig:E,hasCustom:o,canBeOptimized:S}}function cl(t,e){let r=[],n=Sx(t);r=r.concat(n.errors);let o=Ox(n.valid),i=o.valid;return r=r.concat(o.errors),r=r.concat(Rx(i)),r=r.concat(Px(i)),r=r.concat(Mx(i,e)),r=r.concat(wx(i)),r}function Rx(t){let e=[],r=ce(t,n=>_e(n[Ct]));return e=e.concat(_x(r)),e=e.concat(Lx(r)),e=e.concat(kx(r)),e=e.concat(bx(r)),e=e.concat(Cx(r)),e}function Sx(t){let e=ce(t,o=>!T(o,Ct)),r=d(e,o=>({message:"Token Type: ->"+o.name+"<- missing static 'PATTERN' property",type:B.MISSING_PATTERN,tokenTypes:[o]})),n=Tt(t,e);return{errors:r,valid:n}}function Ox(t){let e=ce(t,o=>{let i=o[Ct];return!_e(i)&&!pe(i)&&!T(i,"exec")&&!re(i)}),r=d(e,o=>({message:"Token Type: ->"+o.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:B.INVALID_PATTERN,tokenTypes:[o]})),n=Tt(t,e);return{errors:r,valid:n}}var Nx=/[^\\][$]/;function _x(t){class e extends At{constructor(){super(...arguments),this.found=!1}visitEndAnchor(i){this.found=!0}}let r=ce(t,o=>{let i=o.PATTERN;try{let s=sr(i),a=new e;return a.visit(s),a.found}catch{return Nx.test(i.source)}});return d(r,o=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+o.name+`<- static 'PATTERN' cannot contain end of input anchor '$'
	See chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:B.EOI_ANCHOR_FOUND,tokenTypes:[o]}))}function Cx(t){let e=ce(t,n=>n.PATTERN.test(""));return d(e,n=>({message:"Token Type: ->"+n.name+"<- static 'PATTERN' must not match an empty string",type:B.EMPTY_MATCH_PATTERN,tokenTypes:[n]}))}var vx=/[^\\[][\^]|^\^/;function Lx(t){class e extends At{constructor(){super(...arguments),this.found=!1}visitStartAnchor(i){this.found=!0}}let r=ce(t,o=>{let i=o.PATTERN;try{let s=sr(i),a=new e;return a.visit(s),a.found}catch{return vx.test(i.source)}});return d(r,o=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+o.name+`<- static 'PATTERN' cannot contain start of input anchor '^'
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:B.SOI_ANCHOR_FOUND,tokenTypes:[o]}))}function kx(t){let e=ce(t,n=>{let o=n[Ct];return o instanceof RegExp&&(o.multiline||o.global)});return d(e,n=>({message:"Token Type: ->"+n.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:B.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[n]}))}function bx(t){let e=[],r=d(t,i=>J(t,(s,a)=>(i.PATTERN.source===a.PATTERN.source&&!D(e,a)&&a.PATTERN!==H.NA&&(e.push(a),s.push(a)),s),[]));r=We(r);let n=ce(r,i=>i.length>1);return d(n,i=>{let s=d(i,l=>l.name);return{message:`The same RegExp pattern ->${ie(i).PATTERN}<-has been used in all of the following Token Types: ${s.join(", ")} <-`,type:B.DUPLICATE_PATTERNS_FOUND,tokenTypes:i}})}function Px(t){let e=ce(t,n=>{if(!T(n,"GROUP"))return!1;let o=n.GROUP;return o!==H.SKIPPED&&o!==H.NA&&!re(o)});return d(e,n=>({message:"Token Type: ->"+n.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:B.INVALID_GROUP_TYPE_FOUND,tokenTypes:[n]}))}function Mx(t,e){let r=ce(t,o=>o.PUSH_MODE!==void 0&&!D(e,o.PUSH_MODE));return d(r,o=>({message:`Token Type: ->${o.name}<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->${o.PUSH_MODE}<-which does not exist`,type:B.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[o]}))}function wx(t){let e=[],r=J(t,(n,o,i)=>{let s=o.PATTERN;return s===H.NA||(re(s)?n.push({str:s,idx:i,tokenType:o}):_e(s)&&Ux(s)&&n.push({str:s.source,idx:i,tokenType:o})),n},[]);return g(t,(n,o)=>{g(r,({str:i,idx:s,tokenType:a})=>{if(o<s&&Fx(i,n.PATTERN)){let l=`Token: ->${a.name}<- can never be matched.
Because it appears AFTER the Token Type ->${n.name}<-in the lexer's definition.
See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE`;e.push({message:l,type:B.UNREACHABLE_PATTERN,tokenTypes:[n,a]})}})}),e}function Fx(t,e){if(_e(e)){if(Dx(e))return!1;let r=e.exec(t);return r!==null&&r.index===0}else{if(pe(e))return e(t,0,[],{});if(T(e,"exec"))return e.exec(t,0,[],{});if(typeof e=="string")return e===t;throw Error("non exhaustive match")}}function Ux(t){return $e([".","\\","[","]","|","^","$","(",")","?","*","+","{"],r=>t.source.indexOf(r)!==-1)===void 0}function Dx(t){return/(\(\?=)|(\(\?!)|(\(\?<=)|(\(\?<!)/.test(t.source)}function sl(t){let e=t.ignoreCase?"i":"";return new RegExp(`^(?:${t.source})`,e)}function al(t){let e=t.ignoreCase?"iy":"y";return new RegExp(`${t.source}`,e)}function fl(t,e,r){let n=[];return T(t,lr)||n.push({message:"A MultiMode Lexer cannot be initialized without a <"+lr+`> property in its definition
`,type:B.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),T(t,kn)||n.push({message:"A MultiMode Lexer cannot be initialized without a <"+kn+`> property in its definition
`,type:B.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),T(t,kn)&&T(t,lr)&&!T(t.modes,t.defaultMode)&&n.push({message:`A MultiMode Lexer cannot be initialized with a ${lr}: <${t.defaultMode}>which does not exist
`,type:B.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),T(t,kn)&&g(t.modes,(o,i)=>{g(o,(s,a)=>{if(fe(s))n.push({message:`A Lexer cannot be initialized using an undefined Token Type. Mode:<${i}> at index: <${a}>
`,type:B.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED});else if(T(s,"LONGER_ALT")){let l=A(s.LONGER_ALT)?s.LONGER_ALT:[s.LONGER_ALT];g(l,c=>{!fe(c)&&!D(o,c)&&n.push({message:`A MultiMode Lexer cannot be initialized with a longer_alt <${c.name}> on token <${s.name}> outside of mode <${i}>
`,type:B.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE})})}})}),n}function ul(t,e,r){let n=[],o=!1,i=We(te(L(t.modes))),s=Et(i,l=>l[Ct]===H.NA),a=gl(r);return e&&g(s,l=>{let c=ml(l,a);if(c!==!1){let u={message:Gx(l,c),type:c.issue,tokenType:l};n.push(u)}else T(l,"LINE_BREAKS")?l.LINE_BREAKS===!0&&(o=!0):Ln(a,l.PATTERN)&&(o=!0)}),e&&!o&&n.push({message:`Warning: No LINE_BREAKS Found.
	This Lexer has been defined to track line and column information,
	But none of the Token Types can be identified as matching a line terminator.
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS 
	for details.`,type:B.NO_LINE_BREAKS_FLAGS}),n}function pl(t){let e={},r=k(t);return g(r,n=>{let o=t[n];if(A(o))e[n]=[];else throw Error("non exhaustive match")}),e}function hl(t){let e=t.PATTERN;if(_e(e))return!1;if(pe(e))return!0;if(T(e,"exec"))return!0;if(re(e))return!1;throw Error("non exhaustive match")}function Bx(t){return re(t)&&t.length===1?t.charCodeAt(0):!1}var dl={test:function(t){let e=t.length;for(let r=this.lastIndex;r<e;r++){let n=t.charCodeAt(r);if(n===10)return this.lastIndex=r+1,!0;if(n===13)return t.charCodeAt(r+1)===10?this.lastIndex=r+2:this.lastIndex=r+1,!0}return!1},lastIndex:0};function ml(t,e){if(T(t,"LINE_BREAKS"))return!1;if(_e(t.PATTERN)){try{Ln(e,t.PATTERN)}catch(r){return{issue:B.IDENTIFY_TERMINATOR,errMsg:r.message}}return!1}else{if(re(t.PATTERN))return!1;if(hl(t))return{issue:B.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}}function Gx(t,e){if(e.issue===B.IDENTIFY_TERMINATOR)return`Warning: unable to identify line terminator usage in pattern.
	The problem is in the <${t.name}> Token Type
	 Root cause: ${e.errMsg}.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR`;if(e.issue===B.CUSTOM_LINE_BREAK)return`Warning: A Custom Token Pattern should specify the <line_breaks> option.
	The problem is in the <${t.name}> Token Type
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK`;throw Error("non exhaustive match")}function gl(t){return d(t,r=>re(r)?r.charCodeAt(0):r)}function Co(t,e,r){t[e]===void 0?t[e]=[r]:t[e].push(r)}var ar=256,bn=[];function je(t){return t<ar?t:bn[t]}function Wx(){if(_(bn)){bn=new Array(65536);for(let t=0;t<65536;t++)bn[t]=t>255?255+~~(t/255):t}}function Ze(t,e){let r=t.tokenTypeIdx;return r===e.tokenTypeIdx?!0:e.isParent===!0&&e.categoryMatchesMap[r]===!0}function cr(t,e){return t.tokenTypeIdx===e.tokenTypeIdx}var xl=1,El={};function Qe(t){let e=$x(t);jx(e),Hx(e),Kx(e),g(e,r=>{r.isParent=r.categoryMatches.length>0})}function $x(t){let e=P(t),r=t,n=!0;for(;n;){r=We(te(d(r,i=>i.CATEGORIES)));let o=Tt(r,e);e=e.concat(o),_(o)?n=!1:r=o}return e}function jx(t){g(t,e=>{Lo(e)||(El[xl]=e,e.tokenTypeIdx=xl++),Tl(e)&&!A(e.CATEGORIES)&&(e.CATEGORIES=[e.CATEGORIES]),Tl(e)||(e.CATEGORIES=[]),zx(e)||(e.categoryMatches=[]),Vx(e)||(e.categoryMatchesMap={})})}function Kx(t){g(t,e=>{e.categoryMatches=[],g(e.categoryMatchesMap,(r,n)=>{e.categoryMatches.push(El[n].tokenTypeIdx)})})}function Hx(t){g(t,e=>{Al([],e)})}function Al(t,e){g(t,r=>{e.categoryMatchesMap[r.tokenTypeIdx]=!0}),g(e.CATEGORIES,r=>{let n=t.concat(e);D(n,r)||Al(n,r)})}function Lo(t){return T(t,"tokenTypeIdx")}function Tl(t){return T(t,"CATEGORIES")}function zx(t){return T(t,"categoryMatches")}function Vx(t){return T(t,"categoryMatchesMap")}function Il(t){return T(t,"tokenTypeIdx")}var ko={buildUnableToPopLexerModeMessage(t){return`Unable to pop Lexer Mode after encountering Token ->${t.image}<- The Mode Stack is empty`},buildUnexpectedCharactersMessage(t,e,r,n,o,i){return`unexpected character: ->${t.charAt(e)}<- at offset: ${e}, skipped ${r} characters.`}};var B;(function(t){t[t.MISSING_PATTERN=0]="MISSING_PATTERN",t[t.INVALID_PATTERN=1]="INVALID_PATTERN",t[t.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",t[t.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",t[t.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",t[t.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",t[t.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",t[t.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",t[t.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",t[t.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",t[t.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",t[t.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",t[t.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",t[t.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",t[t.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",t[t.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",t[t.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK",t[t.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE=17]="MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE"})(B||(B={}));var br={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:[`
`,"\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:ko,traceInitPerf:!1,skipValidations:!1,recoveryEnabled:!0};Object.freeze(br);var H=class{constructor(e,r=br){if(this.lexerDefinition=e,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},this.TRACE_INIT=(o,i)=>{if(this.traceInitPerf===!0){this.traceInitIndent++;let s=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${s}--> <${o}>`);let{time:a,value:l}=Or(i),c=a>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&c(`${s}<-- <${o}> time: ${a}ms`),this.traceInitIndent--,l}else return i()},typeof r=="boolean")throw Error(`The second argument to the Lexer constructor is now an ILexerConfig Object.
a boolean 2nd argument is no longer supported`);this.config=se({},br,r);let n=this.config.traceInitPerf;n===!0?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):typeof n=="number"&&(this.traceInitMaxIdent=n,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",()=>{let o,i=!0;this.TRACE_INIT("Lexer Config handling",()=>{if(this.config.lineTerminatorsPattern===br.lineTerminatorsPattern)this.config.lineTerminatorsPattern=dl;else if(this.config.lineTerminatorCharacters===br.lineTerminatorCharacters)throw Error(`Error: Missing <lineTerminatorCharacters> property on the Lexer config.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS`);if(r.safeMode&&r.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');this.trackStartLines=/full|onlyStart/i.test(this.config.positionTracking),this.trackEndLines=/full/i.test(this.config.positionTracking),A(e)?o={modes:{defaultMode:P(e)},defaultMode:lr}:(i=!1,o=P(e))}),this.config.skipValidations===!1&&(this.TRACE_INIT("performRuntimeChecks",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(fl(o,this.trackStartLines,this.config.lineTerminatorCharacters))}),this.TRACE_INIT("performWarningRuntimeChecks",()=>{this.lexerDefinitionWarning=this.lexerDefinitionWarning.concat(ul(o,this.trackStartLines,this.config.lineTerminatorCharacters))})),o.modes=o.modes?o.modes:{},g(o.modes,(a,l)=>{o.modes[l]=Et(a,c=>fe(c))});let s=k(o.modes);if(g(o.modes,(a,l)=>{this.TRACE_INIT(`Mode: <${l}> processing`,()=>{if(this.modes.push(l),this.config.skipValidations===!1&&this.TRACE_INIT("validatePatterns",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(cl(a,s))}),_(this.lexerDefinitionErrors)){Qe(a);let c;this.TRACE_INIT("analyzeTokenTypes",()=>{c=ll(a,{lineTerminatorCharacters:this.config.lineTerminatorCharacters,positionTracking:r.positionTracking,ensureOptimizations:r.ensureOptimizations,safeMode:r.safeMode,tracer:this.TRACE_INIT})}),this.patternIdxToConfig[l]=c.patternIdxToConfig,this.charCodeToPatternIdxToConfig[l]=c.charCodeToPatternIdxToConfig,this.emptyGroups=se({},this.emptyGroups,c.emptyGroups),this.hasCustom=c.hasCustom||this.hasCustom,this.canModeBeOptimized[l]=c.canBeOptimized}})}),this.defaultMode=o.defaultMode,!_(this.lexerDefinitionErrors)&&!this.config.deferDefinitionErrorsHandling){let l=d(this.lexerDefinitionErrors,c=>c.message).join(`-----------------------
`);throw new Error(`Errors detected in definition of Lexer:
`+l)}g(this.lexerDefinitionWarning,a=>{Sr(a.message)}),this.TRACE_INIT("Choosing sub-methods implementations",()=>{if(vo?(this.chopInput=Oe,this.match=this.matchWithTest):(this.updateLastIndex=W,this.match=this.matchWithExec),i&&(this.handleModes=W),this.trackStartLines===!1&&(this.computeNewColumn=Oe),this.trackEndLines===!1&&(this.updateTokenEndLineColumnLocation=W),/full/i.test(this.config.positionTracking))this.createTokenInstance=this.createFullToken;else if(/onlyStart/i.test(this.config.positionTracking))this.createTokenInstance=this.createStartOnlyToken;else if(/onlyOffset/i.test(this.config.positionTracking))this.createTokenInstance=this.createOffsetOnlyToken;else throw Error(`Invalid <positionTracking> config option: "${this.config.positionTracking}"`);this.hasCustom?(this.addToken=this.addTokenUsingPush,this.handlePayload=this.handlePayloadWithCustom):(this.addToken=this.addTokenUsingMemberAccess,this.handlePayload=this.handlePayloadNoCustom)}),this.TRACE_INIT("Failed Optimization Warnings",()=>{let a=J(this.canModeBeOptimized,(l,c,f)=>(c===!1&&l.push(f),l),[]);if(r.ensureOptimizations&&!_(a))throw Error(`Lexer Modes: < ${a.join(", ")} > cannot be optimized.
	 Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.
	 Or inspect the console log for details on how to resolve these issues.`)}),this.TRACE_INIT("clearRegExpParserCache",()=>{rl()}),this.TRACE_INIT("toFastProperties",()=>{Nr(this)})})}tokenize(e,r=this.defaultMode){if(!_(this.lexerDefinitionErrors)){let o=d(this.lexerDefinitionErrors,i=>i.message).join(`-----------------------
`);throw new Error(`Unable to Tokenize because Errors detected in definition of Lexer:
`+o)}return this.tokenizeInternal(e,r)}tokenizeInternal(e,r){let n,o,i,s,a,l,c,f,u,p,x,I,y,S,E,m,h=e,O=h.length,N=0,Ie=0,ao=this.hasCustom?0:Math.floor(e.length/10),Pe=new Array(ao),lo=[],mr=this.trackStartLines?1:void 0,et=this.trackStartLines?1:void 0,gr=pl(this.emptyGroups),Sc=this.trackStartLines,co=this.config.lineTerminatorsPattern,zr=0,tt=[],xr=[],Tr=[],ri=[];Object.freeze(ri);let Er;function ni(){return tt}function oi(ae){let Se=je(ae),bt=xr[Se];return bt===void 0?ri:bt}let Oc=ae=>{if(Tr.length===1&&ae.tokenType.PUSH_MODE===void 0){let Se=this.config.errorMessageProvider.buildUnableToPopLexerModeMessage(ae);lo.push({offset:ae.startOffset,line:ae.startLine,column:ae.startColumn,length:ae.image.length,message:Se})}else{Tr.pop();let Se=Le(Tr);tt=this.patternIdxToConfig[Se],xr=this.charCodeToPatternIdxToConfig[Se],zr=tt.length;let bt=this.canModeBeOptimized[Se]&&this.config.safeMode===!1;xr&&bt?Er=oi:Er=ni}};function ii(ae){Tr.push(ae),xr=this.charCodeToPatternIdxToConfig[ae],tt=this.patternIdxToConfig[ae],zr=tt.length,zr=tt.length;let Se=this.canModeBeOptimized[ae]&&this.config.safeMode===!1;xr&&Se?Er=oi:Er=ni}ii.call(this,r);let Ce,si=this.config.recoveryEnabled;for(;N<O;){l=null;let ae=h.charCodeAt(N),Se=Er(ae),bt=Se.length;for(n=0;n<bt;n++){Ce=Se[n];let ye=Ce.pattern;c=null;let Ke=Ce.short;if(Ke!==!1?ae===Ke&&(l=ye):Ce.isCustom===!0?(m=ye.exec(h,N,Pe,gr),m!==null?(l=m[0],m.payload!==void 0&&(c=m.payload)):l=null):(this.updateLastIndex(ye,N),l=this.match(ye,e,N)),l!==null){if(a=Ce.longerAlt,a!==void 0){let rt=a.length;for(i=0;i<rt;i++){let He=tt[a[i]],yt=He.pattern;if(f=null,He.isCustom===!0?(m=yt.exec(h,N,Pe,gr),m!==null?(s=m[0],m.payload!==void 0&&(f=m.payload)):s=null):(this.updateLastIndex(yt,N),s=this.match(yt,e,N)),s&&s.length>l.length){l=s,c=f,Ce=He;break}}}break}}if(l!==null){if(u=l.length,p=Ce.group,p!==void 0&&(x=Ce.tokenTypeIdx,I=this.createTokenInstance(l,N,x,Ce.tokenType,mr,et,u),this.handlePayload(I,c),p===!1?Ie=this.addToken(Pe,Ie,I):gr[p].push(I)),e=this.chopInput(e,u),N=N+u,et=this.computeNewColumn(et,u),Sc===!0&&Ce.canLineTerminator===!0){let ye=0,Ke,rt;co.lastIndex=0;do Ke=co.test(l),Ke===!0&&(rt=co.lastIndex-1,ye++);while(Ke===!0);ye!==0&&(mr=mr+ye,et=u-rt,this.updateTokenEndLineColumnLocation(I,p,rt,ye,mr,et,u))}this.handleModes(Ce,Oc,ii,I)}else{let ye=N,Ke=mr,rt=et,He=si===!1;for(;He===!1&&N<O;)for(e=this.chopInput(e,1),N++,o=0;o<zr;o++){let yt=tt[o],fo=yt.pattern,ai=yt.short;if(ai!==!1?h.charCodeAt(N)===ai&&(He=!0):yt.isCustom===!0?He=fo.exec(h,N,Pe,gr)!==null:(this.updateLastIndex(fo,N),He=fo.exec(e)!==null),He===!0)break}if(y=N-ye,et=this.computeNewColumn(et,y),E=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(h,ye,y,Ke,rt,Le(Tr)),lo.push({offset:ye,line:Ke,column:rt,length:y,message:E}),si===!1)break}}return this.hasCustom||(Pe.length=Ie),{tokens:Pe,groups:gr,errors:lo}}handleModes(e,r,n,o){if(e.pop===!0){let i=e.push;r(o),i!==void 0&&n.call(this,i)}else e.push!==void 0&&n.call(this,e.push)}chopInput(e,r){return e.substring(r)}updateLastIndex(e,r){e.lastIndex=r}updateTokenEndLineColumnLocation(e,r,n,o,i,s,a){let l,c;r!==void 0&&(l=n===a-1,c=l?-1:0,o===1&&l===!0||(e.endLine=i+c,e.endColumn=s-1+-c))}computeNewColumn(e,r){return e+r}createOffsetOnlyToken(e,r,n,o){return{image:e,startOffset:r,tokenTypeIdx:n,tokenType:o}}createStartOnlyToken(e,r,n,o,i,s){return{image:e,startOffset:r,startLine:i,startColumn:s,tokenTypeIdx:n,tokenType:o}}createFullToken(e,r,n,o,i,s,a){return{image:e,startOffset:r,endOffset:r+a-1,startLine:i,endLine:i,startColumn:s,endColumn:s+a-1,tokenTypeIdx:n,tokenType:o}}addTokenUsingPush(e,r,n){return e.push(n),r}addTokenUsingMemberAccess(e,r,n){return e[r]=n,r++,r}handlePayloadNoCustom(e,r){}handlePayloadWithCustom(e,r){r!==null&&(e.payload=r)}matchWithTest(e,r,n){return e.test(r)===!0?r.substring(n,e.lastIndex):null}matchWithExec(e,r){let n=e.exec(r);return n!==null?n[0]:null}};H.SKIPPED="This marks a skipped Token pattern, this means each token identified by it will be consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.";H.NA=/NOT_APPLICABLE/;function vt(t){return bo(t)?t.LABEL:t.name}function bo(t){return re(t.LABEL)&&t.LABEL!==""}var Xx="parent",yl="categories",Rl="label",Sl="group",Ol="push_mode",Nl="pop_mode",_l="longer_alt",Cl="line_breaks",vl="start_chars_hint";function ee(t){return Yx(t)}function Yx(t){let e=t.pattern,r={};if(r.name=t.name,fe(e)||(r.PATTERN=e),T(t,Xx))throw`The parent property is no longer supported.
See: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.`;return T(t,yl)&&(r.CATEGORIES=t[yl]),Qe([r]),T(t,Rl)&&(r.LABEL=t[Rl]),T(t,Sl)&&(r.GROUP=t[Sl]),T(t,Nl)&&(r.POP_MODE=t[Nl]),T(t,Ol)&&(r.PUSH_MODE=t[Ol]),T(t,_l)&&(r.LONGER_ALT=t[_l]),T(t,Cl)&&(r.LINE_BREAKS=t[Cl]),T(t,vl)&&(r.START_CHARS_HINT=t[vl]),r}var ke=ee({name:"EOF",pattern:H.NA});Qe([ke]);function Lt(t,e,r,n,o,i,s,a){return{image:e,startOffset:r,endOffset:n,startLine:o,endLine:i,startColumn:s,endColumn:a,tokenTypeIdx:t.tokenTypeIdx,tokenType:t}}function Po(t,e){return Ze(t,e)}var Pn={buildMismatchTokenMessage({expected:t,actual:e,previous:r,ruleName:n}){return`Expecting ${bo(t)?`--> ${vt(t)} <--`:`token of type --> ${t.name} <--`} but found --> '${e.image}' <--`},buildNotAllInputParsedMessage({firstRedundant:t,ruleName:e}){return"Redundant input, expecting EOF but found: "+t.image},buildNoViableAltMessage({expectedPathsPerAlt:t,actual:e,previous:r,customUserDescription:n,ruleName:o}){let i="Expecting: ",a=`
but found: '`+ie(e).image+"'";if(n)return i+n+a;{let l=J(t,(p,x)=>p.concat(x),[]),c=d(l,p=>`[${d(p,x=>vt(x)).join(", ")}]`),u=`one of these possible Token sequences:
${d(c,(p,x)=>`  ${x+1}. ${p}`).join(`
`)}`;return i+u+a}},buildEarlyExitMessage({expectedIterationPaths:t,actual:e,customUserDescription:r,ruleName:n}){let o="Expecting: ",s=`
but found: '`+ie(e).image+"'";if(r)return o+r+s;{let l=`expecting at least one iteration which starts with one of these possible Token sequences::
  <${d(t,c=>`[${d(c,f=>vt(f)).join(",")}]`).join(" ,")}>`;return o+l+s}}};Object.freeze(Pn);var Ll={buildRuleNotFoundError(t,e){return"Invalid grammar, reference to a rule which is not defined: ->"+e.nonTerminalName+`<-
inside top level rule: ->`+t.name+"<-"}},be={buildDuplicateFoundError(t,e){function r(f){return f instanceof C?f.terminalType.name:f instanceof M?f.nonTerminalName:""}let n=t.name,o=ie(e),i=o.idx,s=Ae(o),a=r(o),l=i>0,c=`->${s}${l?i:""}<- ${a?`with argument: ->${a}<-`:""}
                  appears more than once (${e.length} times) in the top level rule: ->${n}<-.                  
                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES 
                  `;return c=c.replace(/[ \t]+/g," "),c=c.replace(/\s\s+/g,`
`),c},buildNamespaceConflictError(t){return`Namespace conflict found in grammar.
The grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <${t.name}>.
To resolve this make sure each Terminal and Non-Terminal names are unique
This is easy to accomplish by using the convention that Terminal names start with an uppercase letter
and Non-Terminal names start with a lower case letter.`},buildAlternationPrefixAmbiguityError(t){let e=d(t.prefixPath,o=>vt(o)).join(", "),r=t.alternation.idx===0?"":t.alternation.idx;return`Ambiguous alternatives: <${t.ambiguityIndices.join(" ,")}> due to common lookahead prefix
in <OR${r}> inside <${t.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX
For Further details.`},buildAlternationAmbiguityError(t){let e=d(t.prefixPath,o=>vt(o)).join(", "),r=t.alternation.idx===0?"":t.alternation.idx,n=`Ambiguous Alternatives Detected: <${t.ambiguityIndices.join(" ,")}> in <OR${r}> inside <${t.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
`;return n=n+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES
For Further details.`,n},buildEmptyRepetitionError(t){let e=Ae(t.repetition);return t.repetition.idx!==0&&(e+=t.repetition.idx),`The repetition <${e}> within Rule <${t.topLevelRule.name}> can never consume any tokens.
This could lead to an infinite loop.`},buildTokenNameError(t){return"deprecated"},buildEmptyAlternationError(t){return`Ambiguous empty alternative: <${t.emptyChoiceIdx+1}> in <OR${t.alternation.idx}> inside <${t.topLevelRule.name}> Rule.
Only the last alternative may be an empty alternative.`},buildTooManyAlternativesError(t){return`An Alternation cannot have more than 256 alternatives:
<OR${t.alternation.idx}> inside <${t.topLevelRule.name}> Rule.
 has ${t.alternation.definition.length+1} alternatives.`},buildLeftRecursionError(t){let e=t.topLevelRule.name,r=d(t.leftRecursionPath,i=>i.name),n=`${e} --> ${r.concat([e]).join(" --> ")}`;return`Left Recursion found in grammar.
rule: <${e}> can be invoked from itself (directly or indirectly)
without consuming any Tokens. The grammar path that causes this is: 
 ${n}
 To fix this refactor your grammar to remove the left recursion.
see: https://en.wikipedia.org/wiki/LL_parser#Left_factoring.`},buildInvalidRuleNameError(t){return"deprecated"},buildDuplicateRuleNameError(t){let e;return t.topLevelRule instanceof de?e=t.topLevelRule.name:e=t.topLevelRule,`Duplicate definition, rule: ->${e}<- is already defined in the grammar: ->${t.grammarName}<-`}};function kl(t,e){let r=new Mo(t,e);return r.resolveRefs(),r.errors}var Mo=class extends me{constructor(e,r){super(),this.nameToTopRule=e,this.errMsgProvider=r,this.errors=[]}resolveRefs(){g(L(this.nameToTopRule),e=>{this.currTopLevel=e,e.accept(this)})}visitNonTerminal(e){let r=this.nameToTopRule[e.nonTerminalName];if(r)e.referencedRule=r;else{let n=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,e);this.errors.push({message:n,type:ne.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:e.nonTerminalName})}}};var wo=class extends qe{constructor(e,r){super(),this.topProd=e,this.path=r,this.possibleTokTypes=[],this.nextProductionName="",this.nextProductionOccurrence=0,this.found=!1,this.isAtEndOfPath=!1}startWalking(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=P(this.path.ruleStack).reverse(),this.occurrenceStack=P(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes}walk(e,r=[]){this.found||super.walk(e,r)}walkProdRef(e,r,n){if(e.referencedRule.name===this.nextProductionName&&e.idx===this.nextProductionOccurrence){let o=r.concat(n);this.updateExpectedNext(),this.walk(e.referencedRule,o)}}updateExpectedNext(){_(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())}},Mn=class extends wo{constructor(e,r){super(e,r),this.path=r,this.nextTerminalName="",this.nextTerminalOccurrence=0,this.nextTerminalName=this.path.lastTok.name,this.nextTerminalOccurrence=this.path.lastTokOccurrence}walkTerminal(e,r,n){if(this.isAtEndOfPath&&e.terminalType.name===this.nextTerminalName&&e.idx===this.nextTerminalOccurrence&&!this.found){let o=r.concat(n),i=new w({definition:o});this.possibleTokTypes=Nt(i),this.found=!0}}},fr=class extends qe{constructor(e,r){super(),this.topRule=e,this.occurrence=r,this.result={token:void 0,occurrence:void 0,isEndOfRule:void 0}}startWalking(){return this.walk(this.topRule),this.result}},wn=class extends fr{walkMany(e,r,n){if(e.idx===this.occurrence){let o=ie(r.concat(n));this.result.isEndOfRule=o===void 0,o instanceof C&&(this.result.token=o.terminalType,this.result.occurrence=o.idx)}else super.walkMany(e,r,n)}},Pr=class extends fr{walkManySep(e,r,n){if(e.idx===this.occurrence){let o=ie(r.concat(n));this.result.isEndOfRule=o===void 0,o instanceof C&&(this.result.token=o.terminalType,this.result.occurrence=o.idx)}else super.walkManySep(e,r,n)}},Fn=class extends fr{walkAtLeastOne(e,r,n){if(e.idx===this.occurrence){let o=ie(r.concat(n));this.result.isEndOfRule=o===void 0,o instanceof C&&(this.result.token=o.terminalType,this.result.occurrence=o.idx)}else super.walkAtLeastOne(e,r,n)}},Mr=class extends fr{walkAtLeastOneSep(e,r,n){if(e.idx===this.occurrence){let o=ie(r.concat(n));this.result.isEndOfRule=o===void 0,o instanceof C&&(this.result.token=o.terminalType,this.result.occurrence=o.idx)}else super.walkAtLeastOneSep(e,r,n)}};function Un(t,e,r=[]){r=P(r);let n=[],o=0;function i(a){return a.concat(V(t,o+1))}function s(a){let l=Un(i(a),e,r);return n.concat(l)}for(;r.length<e&&o<t.length;){let a=t[o];if(a instanceof w)return s(a.definition);if(a instanceof M)return s(a.definition);if(a instanceof U)n=s(a.definition);else if(a instanceof X){let l=a.definition.concat([new v({definition:a.definition})]);return s(l)}else if(a instanceof Y){let l=[new w({definition:a.definition}),new v({definition:[new C({terminalType:a.separator})].concat(a.definition)})];return s(l)}else if(a instanceof j){let l=a.definition.concat([new v({definition:[new C({terminalType:a.separator})].concat(a.definition)})]);n=s(l)}else if(a instanceof v){let l=a.definition.concat([new v({definition:a.definition})]);n=s(l)}else{if(a instanceof K)return g(a.definition,l=>{_(l.definition)===!1&&(n=s(l.definition))}),n;if(a instanceof C)r.push(a.terminalType);else throw Error("non exhaustive match")}o++}return n.push({partialPath:r,suffixDef:V(t,o)}),n}function Dn(t,e,r,n){let o="EXIT_NONE_TERMINAL",i=[o],s="EXIT_ALTERNATIVE",a=!1,l=e.length,c=l-n-1,f=[],u=[];for(u.push({idx:-1,def:t,ruleStack:[],occurrenceStack:[]});!_(u);){let p=u.pop();if(p===s){a&&Le(u).idx<=c&&u.pop();continue}let x=p.def,I=p.idx,y=p.ruleStack,S=p.occurrenceStack;if(_(x))continue;let E=x[0];if(E===o){let m={idx:I,def:V(x),ruleStack:Ye(y),occurrenceStack:Ye(S)};u.push(m)}else if(E instanceof C)if(I<l-1){let m=I+1,h=e[m];if(r(h,E.terminalType)){let O={idx:m,def:V(x),ruleStack:y,occurrenceStack:S};u.push(O)}}else if(I===l-1)f.push({nextTokenType:E.terminalType,nextTokenOccurrence:E.idx,ruleStack:y,occurrenceStack:S}),a=!0;else throw Error("non exhaustive match");else if(E instanceof M){let m=P(y);m.push(E.nonTerminalName);let h=P(S);h.push(E.idx);let O={idx:I,def:E.definition.concat(i,V(x)),ruleStack:m,occurrenceStack:h};u.push(O)}else if(E instanceof U){let m={idx:I,def:V(x),ruleStack:y,occurrenceStack:S};u.push(m),u.push(s);let h={idx:I,def:E.definition.concat(V(x)),ruleStack:y,occurrenceStack:S};u.push(h)}else if(E instanceof X){let m=new v({definition:E.definition,idx:E.idx}),h=E.definition.concat([m],V(x)),O={idx:I,def:h,ruleStack:y,occurrenceStack:S};u.push(O)}else if(E instanceof Y){let m=new C({terminalType:E.separator}),h=new v({definition:[m].concat(E.definition),idx:E.idx}),O=E.definition.concat([h],V(x)),N={idx:I,def:O,ruleStack:y,occurrenceStack:S};u.push(N)}else if(E instanceof j){let m={idx:I,def:V(x),ruleStack:y,occurrenceStack:S};u.push(m),u.push(s);let h=new C({terminalType:E.separator}),O=new v({definition:[h].concat(E.definition),idx:E.idx}),N=E.definition.concat([O],V(x)),Ie={idx:I,def:N,ruleStack:y,occurrenceStack:S};u.push(Ie)}else if(E instanceof v){let m={idx:I,def:V(x),ruleStack:y,occurrenceStack:S};u.push(m),u.push(s);let h=new v({definition:E.definition,idx:E.idx}),O=E.definition.concat([h],V(x)),N={idx:I,def:O,ruleStack:y,occurrenceStack:S};u.push(N)}else if(E instanceof K)for(let m=E.definition.length-1;m>=0;m--){let h=E.definition[m],O={idx:I,def:h.definition.concat(V(x)),ruleStack:y,occurrenceStack:S};u.push(O),u.push(s)}else if(E instanceof w)u.push({idx:I,def:E.definition.concat(V(x)),ruleStack:y,occurrenceStack:S});else if(E instanceof de)u.push(qx(E,I,y,S));else throw Error("non exhaustive match")}return f}function qx(t,e,r,n){let o=P(r);o.push(t.name);let i=P(n);return i.push(1),{idx:e,def:t.definition,ruleStack:o,occurrenceStack:i}}var $;(function(t){t[t.OPTION=0]="OPTION",t[t.REPETITION=1]="REPETITION",t[t.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",t[t.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",t[t.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",t[t.ALTERNATION=5]="ALTERNATION"})($||($={}));function Gn(t){if(t instanceof U||t==="Option")return $.OPTION;if(t instanceof v||t==="Repetition")return $.REPETITION;if(t instanceof X||t==="RepetitionMandatory")return $.REPETITION_MANDATORY;if(t instanceof Y||t==="RepetitionMandatoryWithSeparator")return $.REPETITION_MANDATORY_WITH_SEPARATOR;if(t instanceof j||t==="RepetitionWithSeparator")return $.REPETITION_WITH_SEPARATOR;if(t instanceof K||t==="Alternation")return $.ALTERNATION;throw Error("non exhaustive match")}function Pl(t,e,r,n,o,i){let s=wr(t,e,r),a=Bl(s)?cr:Ze;return i(s,n,a,o)}function Ml(t,e,r,n,o,i){let s=Fr(t,e,o,r),a=Bl(s)?cr:Ze;return i(s[0],a,n)}function wl(t,e,r,n){let o=t.length,i=le(t,s=>le(s,a=>a.length===1));if(e)return function(s){let a=d(s,l=>l.GATE);for(let l=0;l<o;l++){let c=t[l],f=c.length,u=a[l];if(!(u!==void 0&&u.call(this)===!1))e:for(let p=0;p<f;p++){let x=c[p],I=x.length;for(let y=0;y<I;y++){let S=this.LA(y+1);if(r(S,x[y])===!1)continue e}return l}}};if(i&&!n){let s=d(t,l=>te(l)),a=J(s,(l,c,f)=>(g(c,u=>{T(l,u.tokenTypeIdx)||(l[u.tokenTypeIdx]=f),g(u.categoryMatches,p=>{T(l,p)||(l[p]=f)})}),l),{});return function(){let l=this.LA(1);return a[l.tokenTypeIdx]}}else return function(){for(let s=0;s<o;s++){let a=t[s],l=a.length;e:for(let c=0;c<l;c++){let f=a[c],u=f.length;for(let p=0;p<u;p++){let x=this.LA(p+1);if(r(x,f[p])===!1)continue e}return s}}}}function Fl(t,e,r){let n=le(t,i=>i.length===1),o=t.length;if(n&&!r){let i=te(t);if(i.length===1&&_(i[0].categoryMatches)){let a=i[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===a}}else{let s=J(i,(a,l,c)=>(a[l.tokenTypeIdx]=!0,g(l.categoryMatches,f=>{a[f]=!0}),a),[]);return function(){let a=this.LA(1);return s[a.tokenTypeIdx]===!0}}}else return function(){e:for(let i=0;i<o;i++){let s=t[i],a=s.length;for(let l=0;l<a;l++){let c=this.LA(l+1);if(e(c,s[l])===!1)continue e}return!0}return!1}}var Uo=class extends qe{constructor(e,r,n){super(),this.topProd=e,this.targetOccurrence=r,this.targetProdType=n}startWalking(){return this.walk(this.topProd),this.restDef}checkIsTarget(e,r,n,o){return e.idx===this.targetOccurrence&&this.targetProdType===r?(this.restDef=n.concat(o),!0):!1}walkOption(e,r,n){this.checkIsTarget(e,$.OPTION,r,n)||super.walkOption(e,r,n)}walkAtLeastOne(e,r,n){this.checkIsTarget(e,$.REPETITION_MANDATORY,r,n)||super.walkOption(e,r,n)}walkAtLeastOneSep(e,r,n){this.checkIsTarget(e,$.REPETITION_MANDATORY_WITH_SEPARATOR,r,n)||super.walkOption(e,r,n)}walkMany(e,r,n){this.checkIsTarget(e,$.REPETITION,r,n)||super.walkOption(e,r,n)}walkManySep(e,r,n){this.checkIsTarget(e,$.REPETITION_WITH_SEPARATOR,r,n)||super.walkOption(e,r,n)}},Bn=class extends me{constructor(e,r,n){super(),this.targetOccurrence=e,this.targetProdType=r,this.targetRef=n,this.result=[]}checkIsTarget(e,r){e.idx===this.targetOccurrence&&this.targetProdType===r&&(this.targetRef===void 0||e===this.targetRef)&&(this.result=e.definition)}visitOption(e){this.checkIsTarget(e,$.OPTION)}visitRepetition(e){this.checkIsTarget(e,$.REPETITION)}visitRepetitionMandatory(e){this.checkIsTarget(e,$.REPETITION_MANDATORY)}visitRepetitionMandatoryWithSeparator(e){this.checkIsTarget(e,$.REPETITION_MANDATORY_WITH_SEPARATOR)}visitRepetitionWithSeparator(e){this.checkIsTarget(e,$.REPETITION_WITH_SEPARATOR)}visitAlternation(e){this.checkIsTarget(e,$.ALTERNATION)}};function bl(t){let e=new Array(t);for(let r=0;r<t;r++)e[r]=[];return e}function Fo(t){let e=[""];for(let r=0;r<t.length;r++){let n=t[r],o=[];for(let i=0;i<e.length;i++){let s=e[i];o.push(s+"_"+n.tokenTypeIdx);for(let a=0;a<n.categoryMatches.length;a++){let l="_"+n.categoryMatches[a];o.push(s+l)}}e=o}return e}function Zx(t,e,r){for(let n=0;n<t.length;n++){if(n===r)continue;let o=t[n];for(let i=0;i<e.length;i++){let s=e[i];if(o[s]===!0)return!1}}return!0}function Ul(t,e){let r=d(t,s=>Un([s],1)),n=bl(r.length),o=d(r,s=>{let a={};return g(s,l=>{let c=Fo(l.partialPath);g(c,f=>{a[f]=!0})}),a}),i=r;for(let s=1;s<=e;s++){let a=i;i=bl(a.length);for(let l=0;l<a.length;l++){let c=a[l];for(let f=0;f<c.length;f++){let u=c[f].partialPath,p=c[f].suffixDef,x=Fo(u);if(Zx(o,x,l)||_(p)||u.length===e){let y=n[l];if(Wn(y,u)===!1){y.push(u);for(let S=0;S<x.length;S++){let E=x[S];o[l][E]=!0}}}else{let y=Un(p,s+1,u);i[l]=i[l].concat(y),g(y,S=>{let E=Fo(S.partialPath);g(E,m=>{o[l][m]=!0})})}}}}return n}function wr(t,e,r,n){let o=new Bn(t,$.ALTERNATION,n);return e.accept(o),Ul(o.result,r)}function Fr(t,e,r,n){let o=new Bn(t,r);e.accept(o);let i=o.result,a=new Uo(e,t,r).startWalking(),l=new w({definition:i}),c=new w({definition:a});return Ul([l,c],n)}function Wn(t,e){e:for(let r=0;r<t.length;r++){let n=t[r];if(n.length===e.length){for(let o=0;o<n.length;o++){let i=e[o],s=n[o];if((i===s||s.categoryMatchesMap[i.tokenTypeIdx]!==void 0)===!1)continue e}return!0}}return!1}function Dl(t,e){return t.length<e.length&&le(t,(r,n)=>{let o=e[n];return r===o||o.categoryMatchesMap[r.tokenTypeIdx]})}function Bl(t){return le(t,e=>le(e,r=>le(r,n=>_(n.categoryMatches))))}function Gl(t){let e=t.lookaheadStrategy.validate({rules:t.rules,tokenTypes:t.tokenTypes,grammarName:t.grammarName});return d(e,r=>Object.assign({type:ne.CUSTOM_LOOKAHEAD_VALIDATION},r))}function Wl(t,e,r,n){let o=he(t,l=>Qx(l,r)),i=oT(t,e,r),s=he(t,l=>tT(l,r)),a=he(t,l=>eT(l,t,n,r));return o.concat(i,s,a)}function Qx(t,e){let r=new Do;t.accept(r);let n=r.allProductions,o=Eo(n,Jx),i=Ee(o,a=>a.length>1);return d(L(i),a=>{let l=ie(a),c=e.buildDuplicateFoundError(t,a),f=Ae(l),u={message:c,type:ne.DUPLICATE_PRODUCTIONS,ruleName:t.name,dslName:f,occurrence:l.idx},p=$l(l);return p&&(u.parameter=p),u})}function Jx(t){return`${Ae(t)}_#_${t.idx}_#_${$l(t)}`}function $l(t){return t instanceof C?t.terminalType.name:t instanceof M?t.nonTerminalName:""}var Do=class extends me{constructor(){super(...arguments),this.allProductions=[]}visitNonTerminal(e){this.allProductions.push(e)}visitOption(e){this.allProductions.push(e)}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}visitAlternation(e){this.allProductions.push(e)}visitTerminal(e){this.allProductions.push(e)}};function eT(t,e,r,n){let o=[];if(J(e,(s,a)=>a.name===t.name?s+1:s,0)>1){let s=n.buildDuplicateRuleNameError({topLevelRule:t,grammarName:r});o.push({message:s,type:ne.DUPLICATE_RULE_NAME,ruleName:t.name})}return o}function jl(t,e,r){let n=[],o;return D(e,t)||(o=`Invalid rule override, rule: ->${t}<- cannot be overridden in the grammar: ->${r}<-as it is not defined in any of the super grammars `,n.push({message:o,type:ne.INVALID_RULE_OVERRIDE,ruleName:t})),n}function Go(t,e,r,n=[]){let o=[],i=$n(e.definition);if(_(i))return[];{let s=t.name;D(i,t)&&o.push({message:r.buildLeftRecursionError({topLevelRule:t,leftRecursionPath:n}),type:ne.LEFT_RECURSION,ruleName:s});let l=Tt(i,n.concat([t])),c=he(l,f=>{let u=P(n);return u.push(f),Go(t,f,r,u)});return o.concat(c)}}function $n(t){let e=[];if(_(t))return e;let r=ie(t);if(r instanceof M)e.push(r.referencedRule);else if(r instanceof w||r instanceof U||r instanceof X||r instanceof Y||r instanceof j||r instanceof v)e=e.concat($n(r.definition));else if(r instanceof K)e=te(d(r.definition,i=>$n(i.definition)));else if(!(r instanceof C))throw Error("non exhaustive match");let n=Ot(r),o=t.length>1;if(n&&o){let i=V(t);return e.concat($n(i))}else return e}var Ur=class extends me{constructor(){super(...arguments),this.alternations=[]}visitAlternation(e){this.alternations.push(e)}};function Kl(t,e){let r=new Ur;t.accept(r);let n=r.alternations;return he(n,i=>{let s=Ye(i.definition);return he(s,(a,l)=>{let c=Dn([a],[],Ze,1);return _(c)?[{message:e.buildEmptyAlternationError({topLevelRule:t,alternation:i,emptyChoiceIdx:l}),type:ne.NONE_LAST_EMPTY_ALT,ruleName:t.name,occurrence:i.idx,alternative:l+1}]:[]})})}function Hl(t,e,r){let n=new Ur;t.accept(n);let o=n.alternations;return o=Et(o,s=>s.ignoreAmbiguities===!0),he(o,s=>{let a=s.idx,l=s.maxLookahead||e,c=wr(a,t,l,s),f=rT(c,s,t,r),u=nT(c,s,t,r);return f.concat(u)})}var Bo=class extends me{constructor(){super(...arguments),this.allProductions=[]}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}};function tT(t,e){let r=new Ur;t.accept(r);let n=r.alternations;return he(n,i=>i.definition.length>255?[{message:e.buildTooManyAlternativesError({topLevelRule:t,alternation:i}),type:ne.TOO_MANY_ALTS,ruleName:t.name,occurrence:i.idx}]:[])}function zl(t,e,r){let n=[];return g(t,o=>{let i=new Bo;o.accept(i);let s=i.allProductions;g(s,a=>{let l=Gn(a),c=a.maxLookahead||e,f=a.idx,p=Fr(f,o,l,c)[0];if(_(te(p))){let x=r.buildEmptyRepetitionError({topLevelRule:o,repetition:a});n.push({message:x,type:ne.NO_NON_EMPTY_LOOKAHEAD,ruleName:o.name})}})}),n}function rT(t,e,r,n){let o=[],i=J(t,(a,l,c)=>(e.definition[c].ignoreAmbiguities===!0||g(l,f=>{let u=[c];g(t,(p,x)=>{c!==x&&Wn(p,f)&&e.definition[x].ignoreAmbiguities!==!0&&u.push(x)}),u.length>1&&!Wn(o,f)&&(o.push(f),a.push({alts:u,path:f}))}),a),[]);return d(i,a=>{let l=d(a.alts,f=>f+1);return{message:n.buildAlternationAmbiguityError({topLevelRule:r,alternation:e,ambiguityIndices:l,prefixPath:a.path}),type:ne.AMBIGUOUS_ALTS,ruleName:r.name,occurrence:e.idx,alternatives:a.alts}})}function nT(t,e,r,n){let o=J(t,(s,a,l)=>{let c=d(a,f=>({idx:l,path:f}));return s.concat(c)},[]);return We(he(o,s=>{if(e.definition[s.idx].ignoreAmbiguities===!0)return[];let l=s.idx,c=s.path,f=ce(o,p=>e.definition[p.idx].ignoreAmbiguities!==!0&&p.idx<l&&Dl(p.path,c));return d(f,p=>{let x=[p.idx+1,l+1],I=e.idx===0?"":e.idx;return{message:n.buildAlternationPrefixAmbiguityError({topLevelRule:r,alternation:e,ambiguityIndices:x,prefixPath:p.path}),type:ne.AMBIGUOUS_PREFIX_ALTS,ruleName:r.name,occurrence:I,alternatives:x}})}))}function oT(t,e,r){let n=[],o=d(e,i=>i.name);return g(t,i=>{let s=i.name;if(D(o,s)){let a=r.buildNamespaceConflictError(i);n.push({message:a,type:ne.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:s})}}),n}function Vl(t){let e=tr(t,{errMsgProvider:Ll}),r={};return g(t.rules,n=>{r[n.name]=n}),kl(r,e.errMsgProvider)}function Xl(t){return t=tr(t,{errMsgProvider:be}),Wl(t.rules,t.tokenTypes,t.errMsgProvider,t.grammarName)}var Yl="MismatchedTokenException",ql="NoViableAltException",Zl="EarlyExitException",Ql="NotAllInputParsedException",Jl=[Yl,ql,Zl,Ql];Object.freeze(Jl);function It(t){return D(Jl,t.name)}var ur=class extends Error{constructor(e,r){super(e),this.token=r,this.resyncedTokens=[],Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}},kt=class extends ur{constructor(e,r,n){super(e,r),this.previousToken=n,this.name=Yl}},Dr=class extends ur{constructor(e,r,n){super(e,r),this.previousToken=n,this.name=ql}},Br=class extends ur{constructor(e,r){super(e,r),this.name=Ql}},Gr=class extends ur{constructor(e,r,n){super(e,r),this.previousToken=n,this.name=Zl}};var Wo={},jo="InRuleRecoveryException",$o=class extends Error{constructor(e){super(e),this.name=jo}},jn=class{initRecoverable(e){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=T(e,"recoveryEnabled")?e.recoveryEnabled:ge.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=iT)}getTokenToInsert(e){let r=Lt(e,"",NaN,NaN,NaN,NaN,NaN,NaN);return r.isInsertedInRecovery=!0,r}canTokenTypeBeInsertedInRecovery(e){return!0}canTokenTypeBeDeletedInRecovery(e){return!0}tryInRepetitionRecovery(e,r,n,o){let i=this.findReSyncTokenType(),s=this.exportLexerState(),a=[],l=!1,c=this.LA(1),f=this.LA(1),u=()=>{let p=this.LA(0),x=this.errorMessageProvider.buildMismatchTokenMessage({expected:o,actual:c,previous:p,ruleName:this.getCurrRuleFullName()}),I=new kt(x,c,this.LA(0));I.resyncedTokens=Ye(a),this.SAVE_ERROR(I)};for(;!l;)if(this.tokenMatcher(f,o)){u();return}else if(n.call(this)){u(),e.apply(this,r);return}else this.tokenMatcher(f,i)?l=!0:(f=this.SKIP_TOKEN(),this.addToResyncTokens(f,a));this.importLexerState(s)}shouldInRepetitionRecoveryBeTried(e,r,n){return!(n===!1||this.tokenMatcher(this.LA(1),e)||this.isBackTracking()||this.canPerformInRuleRecovery(e,this.getFollowsForInRuleRecovery(e,r)))}getFollowsForInRuleRecovery(e,r){let n=this.getCurrentGrammarPath(e,r);return this.getNextPossibleTokenTypes(n)}tryInRuleRecovery(e,r){if(this.canRecoverWithSingleTokenInsertion(e,r))return this.getTokenToInsert(e);if(this.canRecoverWithSingleTokenDeletion(e)){let n=this.SKIP_TOKEN();return this.consumeToken(),n}throw new $o("sad sad panda")}canPerformInRuleRecovery(e,r){return this.canRecoverWithSingleTokenInsertion(e,r)||this.canRecoverWithSingleTokenDeletion(e)}canRecoverWithSingleTokenInsertion(e,r){if(!this.canTokenTypeBeInsertedInRecovery(e)||_(r))return!1;let n=this.LA(1);return $e(r,i=>this.tokenMatcher(n,i))!==void 0}canRecoverWithSingleTokenDeletion(e){return this.canTokenTypeBeDeletedInRecovery(e)?this.tokenMatcher(this.LA(2),e):!1}isInCurrentRuleReSyncSet(e){let r=this.getCurrFollowKey(),n=this.getFollowSetFromFollowKey(r);return D(n,e)}findReSyncTokenType(){let e=this.flattenFollowSet(),r=this.LA(1),n=2;for(;;){let o=$e(e,i=>Po(r,i));if(o!==void 0)return o;r=this.LA(n),n++}}getCurrFollowKey(){if(this.RULE_STACK.length===1)return Wo;let e=this.getLastExplicitRuleShortName(),r=this.getLastExplicitRuleOccurrenceIndex(),n=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(e),idxInCallingRule:r,inRule:this.shortRuleNameToFullName(n)}}buildFullFollowKeyStack(){let e=this.RULE_STACK,r=this.RULE_OCCURRENCE_STACK;return d(e,(n,o)=>o===0?Wo:{ruleName:this.shortRuleNameToFullName(n),idxInCallingRule:r[o],inRule:this.shortRuleNameToFullName(e[o-1])})}flattenFollowSet(){let e=d(this.buildFullFollowKeyStack(),r=>this.getFollowSetFromFollowKey(r));return te(e)}getFollowSetFromFollowKey(e){if(e===Wo)return[ke];let r=e.ruleName+e.idxInCallingRule+On+e.inRule;return this.resyncFollows[r]}addToResyncTokens(e,r){return this.tokenMatcher(e,ke)||r.push(e),r}reSyncTo(e){let r=[],n=this.LA(1);for(;this.tokenMatcher(n,e)===!1;)n=this.SKIP_TOKEN(),this.addToResyncTokens(n,r);return Ye(r)}attemptInRepetitionRecovery(e,r,n,o,i,s,a){}getCurrentGrammarPath(e,r){let n=this.getHumanReadableRuleStack(),o=P(this.RULE_OCCURRENCE_STACK);return{ruleStack:n,occurrenceStack:o,lastTok:e,lastTokOccurrence:r}}getHumanReadableRuleStack(){return d(this.RULE_STACK,e=>this.shortRuleNameToFullName(e))}};function iT(t,e,r,n,o,i,s){let a=this.getKeyForAutomaticLookahead(n,o),l=this.firstAfterRepMap[a];if(l===void 0){let p=this.getCurrRuleFullName(),x=this.getGAstProductions()[p];l=new i(x,o).startWalking(),this.firstAfterRepMap[a]=l}let c=l.token,f=l.occurrence,u=l.isEndOfRule;this.RULE_STACK.length===1&&u&&c===void 0&&(c=ke,f=1),!(c===void 0||f===void 0)&&this.shouldInRepetitionRecoveryBeTried(c,f,s)&&this.tryInRepetitionRecovery(t,e,r,c)}function Kn(t,e,r){return r|e|t}var Wr=class{constructor(e){var r;this.maxLookahead=(r=e?.maxLookahead)!==null&&r!==void 0?r:ge.maxLookahead}validate(e){let r=this.validateNoLeftRecursion(e.rules);if(_(r)){let n=this.validateEmptyOrAlternatives(e.rules),o=this.validateAmbiguousAlternationAlternatives(e.rules,this.maxLookahead),i=this.validateSomeNonEmptyLookaheadPath(e.rules,this.maxLookahead);return[...r,...n,...o,...i]}return r}validateNoLeftRecursion(e){return he(e,r=>Go(r,r,be))}validateEmptyOrAlternatives(e){return he(e,r=>Kl(r,be))}validateAmbiguousAlternationAlternatives(e,r){return he(e,n=>Hl(n,r,be))}validateSomeNonEmptyLookaheadPath(e,r){return zl(e,r,be)}buildLookaheadForAlternation(e){return Pl(e.prodOccurrence,e.rule,e.maxLookahead,e.hasPredicates,e.dynamicTokensEnabled,wl)}buildLookaheadForOptional(e){return Ml(e.prodOccurrence,e.rule,e.maxLookahead,e.dynamicTokensEnabled,Gn(e.prodType),Fl)}};var zn=class{initLooksAhead(e){this.dynamicTokensEnabled=T(e,"dynamicTokensEnabled")?e.dynamicTokensEnabled:ge.dynamicTokensEnabled,this.maxLookahead=T(e,"maxLookahead")?e.maxLookahead:ge.maxLookahead,this.lookaheadStrategy=T(e,"lookaheadStrategy")?e.lookaheadStrategy:new Wr({maxLookahead:this.maxLookahead}),this.lookAheadFuncsCache=new Map}preComputeLookaheadFunctions(e){g(e,r=>{this.TRACE_INIT(`${r.name} Rule Lookahead`,()=>{let{alternation:n,repetition:o,option:i,repetitionMandatory:s,repetitionMandatoryWithSeparator:a,repetitionWithSeparator:l}=sT(r);g(n,c=>{let f=c.idx===0?"":c.idx;this.TRACE_INIT(`${Ae(c)}${f}`,()=>{let u=this.lookaheadStrategy.buildLookaheadForAlternation({prodOccurrence:c.idx,rule:r,maxLookahead:c.maxLookahead||this.maxLookahead,hasPredicates:c.hasPredicates,dynamicTokensEnabled:this.dynamicTokensEnabled}),p=Kn(this.fullRuleNameToShort[r.name],256,c.idx);this.setLaFuncCache(p,u)})}),g(o,c=>{this.computeLookaheadFunc(r,c.idx,768,"Repetition",c.maxLookahead,Ae(c))}),g(i,c=>{this.computeLookaheadFunc(r,c.idx,512,"Option",c.maxLookahead,Ae(c))}),g(s,c=>{this.computeLookaheadFunc(r,c.idx,1024,"RepetitionMandatory",c.maxLookahead,Ae(c))}),g(a,c=>{this.computeLookaheadFunc(r,c.idx,1536,"RepetitionMandatoryWithSeparator",c.maxLookahead,Ae(c))}),g(l,c=>{this.computeLookaheadFunc(r,c.idx,1280,"RepetitionWithSeparator",c.maxLookahead,Ae(c))})})})}computeLookaheadFunc(e,r,n,o,i,s){this.TRACE_INIT(`${s}${r===0?"":r}`,()=>{let a=this.lookaheadStrategy.buildLookaheadForOptional({prodOccurrence:r,rule:e,maxLookahead:i||this.maxLookahead,dynamicTokensEnabled:this.dynamicTokensEnabled,prodType:o}),l=Kn(this.fullRuleNameToShort[e.name],n,r);this.setLaFuncCache(l,a)})}getKeyForAutomaticLookahead(e,r){let n=this.getLastExplicitRuleShortName();return Kn(n,e,r)}getLaFuncFromCache(e){return this.lookAheadFuncsCache.get(e)}setLaFuncCache(e,r){this.lookAheadFuncsCache.set(e,r)}},Ko=class extends me{constructor(){super(...arguments),this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}reset(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}visitOption(e){this.dslMethods.option.push(e)}visitRepetitionWithSeparator(e){this.dslMethods.repetitionWithSeparator.push(e)}visitRepetitionMandatory(e){this.dslMethods.repetitionMandatory.push(e)}visitRepetitionMandatoryWithSeparator(e){this.dslMethods.repetitionMandatoryWithSeparator.push(e)}visitRepetition(e){this.dslMethods.repetition.push(e)}visitAlternation(e){this.dslMethods.alternation.push(e)}},Hn=new Ko;function sT(t){Hn.reset(),t.accept(Hn);let e=Hn.dslMethods;return Hn.reset(),e}function Vo(t,e){isNaN(t.startOffset)===!0?(t.startOffset=e.startOffset,t.endOffset=e.endOffset):t.endOffset<e.endOffset&&(t.endOffset=e.endOffset)}function Xo(t,e){isNaN(t.startOffset)===!0?(t.startOffset=e.startOffset,t.startColumn=e.startColumn,t.startLine=e.startLine,t.endOffset=e.endOffset,t.endColumn=e.endColumn,t.endLine=e.endLine):t.endOffset<e.endOffset&&(t.endOffset=e.endOffset,t.endColumn=e.endColumn,t.endLine=e.endLine)}function ec(t,e,r){t.children[r]===void 0?t.children[r]=[e]:t.children[r].push(e)}function tc(t,e,r){t.children[e]===void 0?t.children[e]=[r]:t.children[e].push(r)}var aT="name";function Yo(t,e){Object.defineProperty(t,aT,{enumerable:!1,configurable:!0,writable:!1,value:e})}function lT(t,e){let r=k(t),n=r.length;for(let o=0;o<n;o++){let i=r[o],s=t[i],a=s.length;for(let l=0;l<a;l++){let c=s[l];c.tokenTypeIdx===void 0&&this[c.name](c.children,e)}}}function rc(t,e){let r=function(){};Yo(r,t+"BaseSemantics");let n={visit:function(o,i){if(A(o)&&(o=o[0]),!fe(o))return this[o.name](o.children,i)},validateVisitor:function(){let o=cT(this,e);if(!_(o)){let i=d(o,s=>s.msg);throw Error(`Errors Detected in CST Visitor <${this.constructor.name}>:
	${i.join(`

`).replace(/\n/g,`
	`)}`)}}};return r.prototype=n,r.prototype.constructor=r,r._RULE_NAMES=e,r}function nc(t,e,r){let n=function(){};Yo(n,t+"BaseSemanticsWithDefaults");let o=Object.create(r.prototype);return g(e,i=>{o[i]=lT}),n.prototype=o,n.prototype.constructor=n,n}var qo;(function(t){t[t.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",t[t.MISSING_METHOD=1]="MISSING_METHOD"})(qo||(qo={}));function cT(t,e){return fT(t,e)}function fT(t,e){let r=ce(e,o=>pe(t[o])===!1),n=d(r,o=>({msg:`Missing visitor method: <${o}> on ${t.constructor.name} CST Visitor.`,type:qo.MISSING_METHOD,methodName:o}));return We(n)}var qn=class{initTreeBuilder(e){if(this.CST_STACK=[],this.outputCst=e.outputCst,this.nodeLocationTracking=T(e,"nodeLocationTracking")?e.nodeLocationTracking:ge.nodeLocationTracking,!this.outputCst)this.cstInvocationStateUpdate=W,this.cstFinallyStateUpdate=W,this.cstPostTerminal=W,this.cstPostNonTerminal=W,this.cstPostRule=W;else if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=Xo,this.setNodeLocationFromNode=Xo,this.cstPostRule=W,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=W,this.setNodeLocationFromNode=W,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=Vo,this.setNodeLocationFromNode=Vo,this.cstPostRule=W,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=W,this.setNodeLocationFromNode=W,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else if(/none/i.test(this.nodeLocationTracking))this.setNodeLocationFromToken=W,this.setNodeLocationFromNode=W,this.cstPostRule=W,this.setInitialNodeLocation=W;else throw Error(`Invalid <nodeLocationTracking> config option: "${e.nodeLocationTracking}"`)}setInitialNodeLocationOnlyOffsetRecovery(e){e.location={startOffset:NaN,endOffset:NaN}}setInitialNodeLocationOnlyOffsetRegular(e){e.location={startOffset:this.LA(1).startOffset,endOffset:NaN}}setInitialNodeLocationFullRecovery(e){e.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}}setInitialNodeLocationFullRegular(e){let r=this.LA(1);e.location={startOffset:r.startOffset,startLine:r.startLine,startColumn:r.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}}cstInvocationStateUpdate(e){let r={name:e,children:Object.create(null)};this.setInitialNodeLocation(r),this.CST_STACK.push(r)}cstFinallyStateUpdate(){this.CST_STACK.pop()}cstPostRuleFull(e){let r=this.LA(0),n=e.location;n.startOffset<=r.startOffset?(n.endOffset=r.endOffset,n.endLine=r.endLine,n.endColumn=r.endColumn):(n.startOffset=NaN,n.startLine=NaN,n.startColumn=NaN)}cstPostRuleOnlyOffset(e){let r=this.LA(0),n=e.location;n.startOffset<=r.startOffset?n.endOffset=r.endOffset:n.startOffset=NaN}cstPostTerminal(e,r){let n=this.CST_STACK[this.CST_STACK.length-1];ec(n,r,e),this.setNodeLocationFromToken(n.location,r)}cstPostNonTerminal(e,r){let n=this.CST_STACK[this.CST_STACK.length-1];tc(n,r,e),this.setNodeLocationFromNode(n.location,e.location)}getBaseCstVisitorConstructor(){if(fe(this.baseCstVisitorConstructor)){let e=rc(this.className,k(this.gastProductionsCache));return this.baseCstVisitorConstructor=e,e}return this.baseCstVisitorConstructor}getBaseCstVisitorConstructorWithDefaults(){if(fe(this.baseCstVisitorWithDefaultsConstructor)){let e=nc(this.className,k(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=e,e}return this.baseCstVisitorWithDefaultsConstructor}getLastExplicitRuleShortName(){let e=this.RULE_STACK;return e[e.length-1]}getPreviousExplicitRuleShortName(){let e=this.RULE_STACK;return e[e.length-2]}getLastExplicitRuleOccurrenceIndex(){let e=this.RULE_OCCURRENCE_STACK;return e[e.length-1]}};var Zn=class{initLexerAdapter(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1}set input(e){if(this.selfAnalysisDone!==!0)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=e,this.tokVectorLength=e.length}get input(){return this.tokVector}SKIP_TOKEN(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):pr}LA(e){let r=this.currIdx+e;return r<0||this.tokVectorLength<=r?pr:this.tokVector[r]}consumeToken(){this.currIdx++}exportLexerState(){return this.currIdx}importLexerState(e){this.currIdx=e}resetLexerState(){this.currIdx=-1}moveToTerminatedState(){this.currIdx=this.tokVector.length-1}getLexerPosition(){return this.exportLexerState()}};var Qn=class{ACTION(e){return e.call(this)}consume(e,r,n){return this.consumeInternal(r,e,n)}subrule(e,r,n){return this.subruleInternal(r,e,n)}option(e,r){return this.optionInternal(r,e)}or(e,r){return this.orInternal(r,e)}many(e,r){return this.manyInternal(e,r)}atLeastOne(e,r){return this.atLeastOneInternal(e,r)}CONSUME(e,r){return this.consumeInternal(e,0,r)}CONSUME1(e,r){return this.consumeInternal(e,1,r)}CONSUME2(e,r){return this.consumeInternal(e,2,r)}CONSUME3(e,r){return this.consumeInternal(e,3,r)}CONSUME4(e,r){return this.consumeInternal(e,4,r)}CONSUME5(e,r){return this.consumeInternal(e,5,r)}CONSUME6(e,r){return this.consumeInternal(e,6,r)}CONSUME7(e,r){return this.consumeInternal(e,7,r)}CONSUME8(e,r){return this.consumeInternal(e,8,r)}CONSUME9(e,r){return this.consumeInternal(e,9,r)}SUBRULE(e,r){return this.subruleInternal(e,0,r)}SUBRULE1(e,r){return this.subruleInternal(e,1,r)}SUBRULE2(e,r){return this.subruleInternal(e,2,r)}SUBRULE3(e,r){return this.subruleInternal(e,3,r)}SUBRULE4(e,r){return this.subruleInternal(e,4,r)}SUBRULE5(e,r){return this.subruleInternal(e,5,r)}SUBRULE6(e,r){return this.subruleInternal(e,6,r)}SUBRULE7(e,r){return this.subruleInternal(e,7,r)}SUBRULE8(e,r){return this.subruleInternal(e,8,r)}SUBRULE9(e,r){return this.subruleInternal(e,9,r)}OPTION(e){return this.optionInternal(e,0)}OPTION1(e){return this.optionInternal(e,1)}OPTION2(e){return this.optionInternal(e,2)}OPTION3(e){return this.optionInternal(e,3)}OPTION4(e){return this.optionInternal(e,4)}OPTION5(e){return this.optionInternal(e,5)}OPTION6(e){return this.optionInternal(e,6)}OPTION7(e){return this.optionInternal(e,7)}OPTION8(e){return this.optionInternal(e,8)}OPTION9(e){return this.optionInternal(e,9)}OR(e){return this.orInternal(e,0)}OR1(e){return this.orInternal(e,1)}OR2(e){return this.orInternal(e,2)}OR3(e){return this.orInternal(e,3)}OR4(e){return this.orInternal(e,4)}OR5(e){return this.orInternal(e,5)}OR6(e){return this.orInternal(e,6)}OR7(e){return this.orInternal(e,7)}OR8(e){return this.orInternal(e,8)}OR9(e){return this.orInternal(e,9)}MANY(e){this.manyInternal(0,e)}MANY1(e){this.manyInternal(1,e)}MANY2(e){this.manyInternal(2,e)}MANY3(e){this.manyInternal(3,e)}MANY4(e){this.manyInternal(4,e)}MANY5(e){this.manyInternal(5,e)}MANY6(e){this.manyInternal(6,e)}MANY7(e){this.manyInternal(7,e)}MANY8(e){this.manyInternal(8,e)}MANY9(e){this.manyInternal(9,e)}MANY_SEP(e){this.manySepFirstInternal(0,e)}MANY_SEP1(e){this.manySepFirstInternal(1,e)}MANY_SEP2(e){this.manySepFirstInternal(2,e)}MANY_SEP3(e){this.manySepFirstInternal(3,e)}MANY_SEP4(e){this.manySepFirstInternal(4,e)}MANY_SEP5(e){this.manySepFirstInternal(5,e)}MANY_SEP6(e){this.manySepFirstInternal(6,e)}MANY_SEP7(e){this.manySepFirstInternal(7,e)}MANY_SEP8(e){this.manySepFirstInternal(8,e)}MANY_SEP9(e){this.manySepFirstInternal(9,e)}AT_LEAST_ONE(e){this.atLeastOneInternal(0,e)}AT_LEAST_ONE1(e){return this.atLeastOneInternal(1,e)}AT_LEAST_ONE2(e){this.atLeastOneInternal(2,e)}AT_LEAST_ONE3(e){this.atLeastOneInternal(3,e)}AT_LEAST_ONE4(e){this.atLeastOneInternal(4,e)}AT_LEAST_ONE5(e){this.atLeastOneInternal(5,e)}AT_LEAST_ONE6(e){this.atLeastOneInternal(6,e)}AT_LEAST_ONE7(e){this.atLeastOneInternal(7,e)}AT_LEAST_ONE8(e){this.atLeastOneInternal(8,e)}AT_LEAST_ONE9(e){this.atLeastOneInternal(9,e)}AT_LEAST_ONE_SEP(e){this.atLeastOneSepFirstInternal(0,e)}AT_LEAST_ONE_SEP1(e){this.atLeastOneSepFirstInternal(1,e)}AT_LEAST_ONE_SEP2(e){this.atLeastOneSepFirstInternal(2,e)}AT_LEAST_ONE_SEP3(e){this.atLeastOneSepFirstInternal(3,e)}AT_LEAST_ONE_SEP4(e){this.atLeastOneSepFirstInternal(4,e)}AT_LEAST_ONE_SEP5(e){this.atLeastOneSepFirstInternal(5,e)}AT_LEAST_ONE_SEP6(e){this.atLeastOneSepFirstInternal(6,e)}AT_LEAST_ONE_SEP7(e){this.atLeastOneSepFirstInternal(7,e)}AT_LEAST_ONE_SEP8(e){this.atLeastOneSepFirstInternal(8,e)}AT_LEAST_ONE_SEP9(e){this.atLeastOneSepFirstInternal(9,e)}RULE(e,r,n=hr){if(D(this.definedRulesNames,e)){let s={message:be.buildDuplicateRuleNameError({topLevelRule:e,grammarName:this.className}),type:ne.DUPLICATE_RULE_NAME,ruleName:e};this.definitionErrors.push(s)}this.definedRulesNames.push(e);let o=this.defineRule(e,r,n);return this[e]=o,o}OVERRIDE_RULE(e,r,n=hr){let o=jl(e,this.definedRulesNames,this.className);this.definitionErrors=this.definitionErrors.concat(o);let i=this.defineRule(e,r,n);return this[e]=i,i}BACKTRACK(e,r){return function(){this.isBackTrackingStack.push(1);let n=this.saveRecogState();try{return e.apply(this,r),!0}catch(o){if(It(o))return!1;throw o}finally{this.reloadRecogState(n),this.isBackTrackingStack.pop()}}}getGAstProductions(){return this.gastProductionsCache}getSerializedGastProductions(){return Sn(L(this.gastProductionsCache))}};var Jn=class{initRecognizerEngine(e,r){if(this.className=this.constructor.name,this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=cr,this.subruleIdx=0,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},T(r,"serializedGrammar"))throw Error(`The Parser's configuration can no longer contain a <serializedGrammar> property.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0
	For Further details.`);if(A(e)){if(_(e))throw Error(`A Token Vocabulary cannot be empty.
	Note that the first argument for the parser constructor
	is no longer a Token vector (since v4.0).`);if(typeof e[0].startOffset=="number")throw Error(`The Parser constructor no longer accepts a token vector as the first argument.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0
	For Further details.`)}if(A(e))this.tokensMap=J(e,(i,s)=>(i[s.name]=s,i),{});else if(T(e,"modes")&&le(te(L(e.modes)),Il)){let i=te(L(e.modes)),s=rr(i);this.tokensMap=J(s,(a,l)=>(a[l.name]=l,a),{})}else if(G(e))this.tokensMap=P(e);else throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap.EOF=ke;let n=T(e,"modes")?te(L(e.modes)):L(e),o=le(n,i=>_(i.categoryMatches));this.tokenMatcher=o?cr:Ze,Qe(L(this.tokensMap))}defineRule(e,r,n){if(this.selfAnalysisDone)throw Error(`Grammar rule <${e}> may not be defined after the 'performSelfAnalysis' method has been called'
Make sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.`);let o=T(n,"resyncEnabled")?n.resyncEnabled:hr.resyncEnabled,i=T(n,"recoveryValueFunc")?n.recoveryValueFunc:hr.recoveryValueFunc,s=this.ruleShortNameIdx<<12;this.ruleShortNameIdx++,this.shortRuleNameToFull[s]=e,this.fullRuleNameToShort[e]=s;let a;return this.outputCst===!0?a=function(...f){try{this.ruleInvocationStateUpdate(s,e,this.subruleIdx),r.apply(this,f);let u=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(u),u}catch(u){return this.invokeRuleCatch(u,o,i)}finally{this.ruleFinallyStateUpdate()}}:a=function(...f){try{return this.ruleInvocationStateUpdate(s,e,this.subruleIdx),r.apply(this,f)}catch(u){return this.invokeRuleCatch(u,o,i)}finally{this.ruleFinallyStateUpdate()}},Object.assign(a,{ruleName:e,originalGrammarAction:r})}invokeRuleCatch(e,r,n){let o=this.RULE_STACK.length===1,i=r&&!this.isBackTracking()&&this.recoveryEnabled;if(It(e)){let s=e;if(i){let a=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(a))if(s.resyncedTokens=this.reSyncTo(a),this.outputCst){let l=this.CST_STACK[this.CST_STACK.length-1];return l.recoveredNode=!0,l}else return n(e);else{if(this.outputCst){let l=this.CST_STACK[this.CST_STACK.length-1];l.recoveredNode=!0,s.partialCstResult=l}throw s}}else{if(o)return this.moveToTerminatedState(),n(e);throw s}}else throw e}optionInternal(e,r){let n=this.getKeyForAutomaticLookahead(512,r);return this.optionInternalLogic(e,r,n)}optionInternalLogic(e,r,n){let o=this.getLaFuncFromCache(n),i;if(typeof e!="function"){i=e.DEF;let s=e.GATE;if(s!==void 0){let a=o;o=()=>s.call(this)&&a.call(this)}}else i=e;if(o.call(this)===!0)return i.call(this)}atLeastOneInternal(e,r){let n=this.getKeyForAutomaticLookahead(1024,e);return this.atLeastOneInternalLogic(e,r,n)}atLeastOneInternalLogic(e,r,n){let o=this.getLaFuncFromCache(n),i;if(typeof r!="function"){i=r.DEF;let s=r.GATE;if(s!==void 0){let a=o;o=()=>s.call(this)&&a.call(this)}}else i=r;if(o.call(this)===!0){let s=this.doSingleRepetition(i);for(;o.call(this)===!0&&s===!0;)s=this.doSingleRepetition(i)}else throw this.raiseEarlyExitException(e,$.REPETITION_MANDATORY,r.ERR_MSG);this.attemptInRepetitionRecovery(this.atLeastOneInternal,[e,r],o,1024,e,Fn)}atLeastOneSepFirstInternal(e,r){let n=this.getKeyForAutomaticLookahead(1536,e);this.atLeastOneSepFirstInternalLogic(e,r,n)}atLeastOneSepFirstInternalLogic(e,r,n){let o=r.DEF,i=r.SEP;if(this.getLaFuncFromCache(n).call(this)===!0){o.call(this);let a=()=>this.tokenMatcher(this.LA(1),i);for(;this.tokenMatcher(this.LA(1),i)===!0;)this.CONSUME(i),o.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,i,a,o,Mr],a,1536,e,Mr)}else throw this.raiseEarlyExitException(e,$.REPETITION_MANDATORY_WITH_SEPARATOR,r.ERR_MSG)}manyInternal(e,r){let n=this.getKeyForAutomaticLookahead(768,e);return this.manyInternalLogic(e,r,n)}manyInternalLogic(e,r,n){let o=this.getLaFuncFromCache(n),i;if(typeof r!="function"){i=r.DEF;let a=r.GATE;if(a!==void 0){let l=o;o=()=>a.call(this)&&l.call(this)}}else i=r;let s=!0;for(;o.call(this)===!0&&s===!0;)s=this.doSingleRepetition(i);this.attemptInRepetitionRecovery(this.manyInternal,[e,r],o,768,e,wn,s)}manySepFirstInternal(e,r){let n=this.getKeyForAutomaticLookahead(1280,e);this.manySepFirstInternalLogic(e,r,n)}manySepFirstInternalLogic(e,r,n){let o=r.DEF,i=r.SEP;if(this.getLaFuncFromCache(n).call(this)===!0){o.call(this);let a=()=>this.tokenMatcher(this.LA(1),i);for(;this.tokenMatcher(this.LA(1),i)===!0;)this.CONSUME(i),o.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,i,a,o,Pr],a,1280,e,Pr)}}repetitionSepSecondInternal(e,r,n,o,i){for(;n();)this.CONSUME(r),o.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,r,n,o,i],n,1536,e,i)}doSingleRepetition(e){let r=this.getLexerPosition();return e.call(this),this.getLexerPosition()>r}orInternal(e,r){let n=this.getKeyForAutomaticLookahead(256,r),o=A(e)?e:e.DEF,s=this.getLaFuncFromCache(n).call(this,o);if(s!==void 0)return o[s].ALT.call(this);this.raiseNoAltException(r,e.ERR_MSG)}ruleFinallyStateUpdate(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),this.RULE_STACK.length===0&&this.isAtEndOfInput()===!1){let e=this.LA(1),r=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:e,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new Br(r,e))}}subruleInternal(e,r,n){let o;try{let i=n!==void 0?n.ARGS:void 0;return this.subruleIdx=r,o=e.apply(this,i),this.cstPostNonTerminal(o,n!==void 0&&n.LABEL!==void 0?n.LABEL:e.ruleName),o}catch(i){throw this.subruleInternalError(i,n,e.ruleName)}}subruleInternalError(e,r,n){throw It(e)&&e.partialCstResult!==void 0&&(this.cstPostNonTerminal(e.partialCstResult,r!==void 0&&r.LABEL!==void 0?r.LABEL:n),delete e.partialCstResult),e}consumeInternal(e,r,n){let o;try{let i=this.LA(1);this.tokenMatcher(i,e)===!0?(this.consumeToken(),o=i):this.consumeInternalError(e,i,n)}catch(i){o=this.consumeInternalRecovery(e,r,i)}return this.cstPostTerminal(n!==void 0&&n.LABEL!==void 0?n.LABEL:e.name,o),o}consumeInternalError(e,r,n){let o,i=this.LA(0);throw n!==void 0&&n.ERR_MSG?o=n.ERR_MSG:o=this.errorMessageProvider.buildMismatchTokenMessage({expected:e,actual:r,previous:i,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new kt(o,r,i))}consumeInternalRecovery(e,r,n){if(this.recoveryEnabled&&n.name==="MismatchedTokenException"&&!this.isBackTracking()){let o=this.getFollowsForInRuleRecovery(e,r);try{return this.tryInRuleRecovery(e,o)}catch(i){throw i.name===jo?n:i}}else throw n}saveRecogState(){let e=this.errors,r=P(this.RULE_STACK);return{errors:e,lexerState:this.exportLexerState(),RULE_STACK:r,CST_STACK:this.CST_STACK}}reloadRecogState(e){this.errors=e.errors,this.importLexerState(e.lexerState),this.RULE_STACK=e.RULE_STACK}ruleInvocationStateUpdate(e,r,n){this.RULE_OCCURRENCE_STACK.push(n),this.RULE_STACK.push(e),this.cstInvocationStateUpdate(r)}isBackTracking(){return this.isBackTrackingStack.length!==0}getCurrRuleFullName(){let e=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[e]}shortRuleNameToFullName(e){return this.shortRuleNameToFull[e]}isAtEndOfInput(){return this.tokenMatcher(this.LA(1),ke)}reset(){this.resetLexerState(),this.subruleIdx=0,this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]}};var eo=class{initErrorHandler(e){this._errors=[],this.errorMessageProvider=T(e,"errorMessageProvider")?e.errorMessageProvider:ge.errorMessageProvider}SAVE_ERROR(e){if(It(e))return e.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:P(this.RULE_OCCURRENCE_STACK)},this._errors.push(e),e;throw Error("Trying to save an Error which is not a RecognitionException")}get errors(){return P(this._errors)}set errors(e){this._errors=e}raiseEarlyExitException(e,r,n){let o=this.getCurrRuleFullName(),i=this.getGAstProductions()[o],a=Fr(e,i,r,this.maxLookahead)[0],l=[];for(let f=1;f<=this.maxLookahead;f++)l.push(this.LA(f));let c=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:a,actual:l,previous:this.LA(0),customUserDescription:n,ruleName:o});throw this.SAVE_ERROR(new Gr(c,this.LA(1),this.LA(0)))}raiseNoAltException(e,r){let n=this.getCurrRuleFullName(),o=this.getGAstProductions()[n],i=wr(e,o,this.maxLookahead),s=[];for(let c=1;c<=this.maxLookahead;c++)s.push(this.LA(c));let a=this.LA(0),l=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:i,actual:s,previous:a,customUserDescription:r,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new Dr(l,this.LA(1),a))}};var to=class{initContentAssist(){}computeContentAssist(e,r){let n=this.gastProductionsCache[e];if(fe(n))throw Error(`Rule ->${e}<- does not exist in this grammar.`);return Dn([n],r,this.tokenMatcher,this.maxLookahead)}getNextPossibleTokenTypes(e){let r=ie(e.ruleStack),o=this.getGAstProductions()[r];return new Mn(o,e).startWalking()}};var oo={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(oo);var oc=!0,ic=Math.pow(2,8)-1,ac=ee({name:"RECORDING_PHASE_TOKEN",pattern:H.NA});Qe([ac]);var lc=Lt(ac,`This IToken indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,-1,-1,-1,-1,-1,-1);Object.freeze(lc);var pT={name:`This CSTNode indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,children:{}},ro=class{initGastRecorder(e){this.recordingProdStack=[],this.RECORDING_PHASE=!1}enableRecording(){this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",()=>{for(let e=0;e<10;e++){let r=e>0?e:"";this[`CONSUME${r}`]=function(n,o){return this.consumeInternalRecord(n,e,o)},this[`SUBRULE${r}`]=function(n,o){return this.subruleInternalRecord(n,e,o)},this[`OPTION${r}`]=function(n){return this.optionInternalRecord(n,e)},this[`OR${r}`]=function(n){return this.orInternalRecord(n,e)},this[`MANY${r}`]=function(n){this.manyInternalRecord(e,n)},this[`MANY_SEP${r}`]=function(n){this.manySepFirstInternalRecord(e,n)},this[`AT_LEAST_ONE${r}`]=function(n){this.atLeastOneInternalRecord(e,n)},this[`AT_LEAST_ONE_SEP${r}`]=function(n){this.atLeastOneSepFirstInternalRecord(e,n)}}this.consume=function(e,r,n){return this.consumeInternalRecord(r,e,n)},this.subrule=function(e,r,n){return this.subruleInternalRecord(r,e,n)},this.option=function(e,r){return this.optionInternalRecord(r,e)},this.or=function(e,r){return this.orInternalRecord(r,e)},this.many=function(e,r){this.manyInternalRecord(e,r)},this.atLeastOne=function(e,r){this.atLeastOneInternalRecord(e,r)},this.ACTION=this.ACTION_RECORD,this.BACKTRACK=this.BACKTRACK_RECORD,this.LA=this.LA_RECORD})}disableRecording(){this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",()=>{let e=this;for(let r=0;r<10;r++){let n=r>0?r:"";delete e[`CONSUME${n}`],delete e[`SUBRULE${n}`],delete e[`OPTION${n}`],delete e[`OR${n}`],delete e[`MANY${n}`],delete e[`MANY_SEP${n}`],delete e[`AT_LEAST_ONE${n}`],delete e[`AT_LEAST_ONE_SEP${n}`]}delete e.consume,delete e.subrule,delete e.option,delete e.or,delete e.many,delete e.atLeastOne,delete e.ACTION,delete e.BACKTRACK,delete e.LA})}ACTION_RECORD(e){}BACKTRACK_RECORD(e,r){return()=>!0}LA_RECORD(e){return pr}topLevelRuleRecord(e,r){try{let n=new de({definition:[],name:e});return n.name=e,this.recordingProdStack.push(n),r.call(this),this.recordingProdStack.pop(),n}catch(n){if(n.KNOWN_RECORDER_ERROR!==!0)try{n.message=n.message+`
	 This error was thrown during the "grammar recording phase" For more info see:
	https://chevrotain.io/docs/guide/internals.html#grammar-recording`}catch{throw n}throw n}}optionInternalRecord(e,r){return jr.call(this,U,e,r)}atLeastOneInternalRecord(e,r){jr.call(this,X,r,e)}atLeastOneSepFirstInternalRecord(e,r){jr.call(this,Y,r,e,oc)}manyInternalRecord(e,r){jr.call(this,v,r,e)}manySepFirstInternalRecord(e,r){jr.call(this,j,r,e,oc)}orInternalRecord(e,r){return hT.call(this,e,r)}subruleInternalRecord(e,r,n){if(no(r),!e||T(e,"ruleName")===!1){let a=new Error(`<SUBRULE${sc(r)}> argument is invalid expecting a Parser method reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw a.KNOWN_RECORDER_ERROR=!0,a}let o=Le(this.recordingProdStack),i=e.ruleName,s=new M({idx:r,nonTerminalName:i,label:n?.LABEL,referencedRule:void 0});return o.definition.push(s),this.outputCst?pT:oo}consumeInternalRecord(e,r,n){if(no(r),!Lo(e)){let s=new Error(`<CONSUME${sc(r)}> argument is invalid expecting a TokenType reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw s.KNOWN_RECORDER_ERROR=!0,s}let o=Le(this.recordingProdStack),i=new C({idx:r,terminalType:e,label:n?.LABEL});return o.definition.push(i),lc}};function jr(t,e,r,n=!1){no(r);let o=Le(this.recordingProdStack),i=pe(e)?e:e.DEF,s=new t({definition:[],idx:r});return n&&(s.separator=e.SEP),T(e,"MAX_LOOKAHEAD")&&(s.maxLookahead=e.MAX_LOOKAHEAD),this.recordingProdStack.push(s),i.call(this),o.definition.push(s),this.recordingProdStack.pop(),oo}function hT(t,e){no(e);let r=Le(this.recordingProdStack),n=A(t)===!1,o=n===!1?t:t.DEF,i=new K({definition:[],idx:e,ignoreAmbiguities:n&&t.IGNORE_AMBIGUITIES===!0});T(t,"MAX_LOOKAHEAD")&&(i.maxLookahead=t.MAX_LOOKAHEAD);let s=Rr(o,a=>pe(a.GATE));return i.hasPredicates=s,r.definition.push(i),g(o,a=>{let l=new w({definition:[]});i.definition.push(l),T(a,"IGNORE_AMBIGUITIES")?l.ignoreAmbiguities=a.IGNORE_AMBIGUITIES:T(a,"GATE")&&(l.ignoreAmbiguities=!0),this.recordingProdStack.push(l),a.ALT.call(this),this.recordingProdStack.pop()}),oo}function sc(t){return t===0?"":`${t}`}function no(t){if(t<0||t>ic){let e=new Error(`Invalid DSL Method idx value: <${t}>
	Idx value must be a none negative value smaller than ${ic+1}`);throw e.KNOWN_RECORDER_ERROR=!0,e}}var io=class{initPerformanceTracer(e){if(T(e,"traceInitPerf")){let r=e.traceInitPerf,n=typeof r=="number";this.traceInitMaxIdent=n?r:1/0,this.traceInitPerf=n?r>0:r}else this.traceInitMaxIdent=0,this.traceInitPerf=ge.traceInitPerf;this.traceInitIndent=-1}TRACE_INIT(e,r){if(this.traceInitPerf===!0){this.traceInitIndent++;let n=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${n}--> <${e}>`);let{time:o,value:i}=Or(r),s=o>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&s(`${n}<-- <${e}> time: ${o}ms`),this.traceInitIndent--,i}else return r()}};function cc(t,e){e.forEach(r=>{let n=r.prototype;Object.getOwnPropertyNames(n).forEach(o=>{if(o==="constructor")return;let i=Object.getOwnPropertyDescriptor(n,o);i&&(i.get||i.set)?Object.defineProperty(t.prototype,o,i):t.prototype[o]=r.prototype[o]})})}var pr=Lt(ke,"",NaN,NaN,NaN,NaN,NaN,NaN);Object.freeze(pr);var ge=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:Pn,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),hr=Object.freeze({recoveryValueFunc:()=>{},resyncEnabled:!0}),ne;(function(t){t[t.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",t[t.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",t[t.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",t[t.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",t[t.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",t[t.LEFT_RECURSION=5]="LEFT_RECURSION",t[t.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",t[t.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",t[t.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",t[t.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",t[t.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",t[t.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",t[t.TOO_MANY_ALTS=12]="TOO_MANY_ALTS",t[t.CUSTOM_LOOKAHEAD_VALIDATION=13]="CUSTOM_LOOKAHEAD_VALIDATION"})(ne||(ne={}));var Kr=class t{static performSelfAnalysis(e){throw Error("The **static** `performSelfAnalysis` method has been deprecated.	\nUse the **instance** method with the same name instead.")}performSelfAnalysis(){this.TRACE_INIT("performSelfAnalysis",()=>{let e;this.selfAnalysisDone=!0;let r=this.className;this.TRACE_INIT("toFastProps",()=>{Nr(this)}),this.TRACE_INIT("Grammar Recording",()=>{try{this.enableRecording(),g(this.definedRulesNames,o=>{let s=this[o].originalGrammarAction,a;this.TRACE_INIT(`${o} Rule`,()=>{a=this.topLevelRuleRecord(o,s)}),this.gastProductionsCache[o]=a})}finally{this.disableRecording()}});let n=[];if(this.TRACE_INIT("Grammar Resolving",()=>{n=Vl({rules:L(this.gastProductionsCache)}),this.definitionErrors=this.definitionErrors.concat(n)}),this.TRACE_INIT("Grammar Validations",()=>{if(_(n)&&this.skipValidations===!1){let o=Xl({rules:L(this.gastProductionsCache),tokenTypes:L(this.tokensMap),errMsgProvider:be,grammarName:r}),i=Gl({lookaheadStrategy:this.lookaheadStrategy,rules:L(this.gastProductionsCache),tokenTypes:L(this.tokensMap),grammarName:r});this.definitionErrors=this.definitionErrors.concat(o,i)}}),_(this.definitionErrors)&&(this.recoveryEnabled&&this.TRACE_INIT("computeAllProdsFollows",()=>{let o=tl(L(this.gastProductionsCache));this.resyncFollows=o}),this.TRACE_INIT("ComputeLookaheadFunctions",()=>{var o,i;(i=(o=this.lookaheadStrategy).initialize)===null||i===void 0||i.call(o,{rules:L(this.gastProductionsCache)}),this.preComputeLookaheadFunctions(L(this.gastProductionsCache))})),!t.DEFER_DEFINITION_ERRORS_HANDLING&&!_(this.definitionErrors))throw e=d(this.definitionErrors,o=>o.message),new Error(`Parser Definition Errors detected:
 ${e.join(`
-------------------------------
`)}`)})}constructor(e,r){this.definitionErrors=[],this.selfAnalysisDone=!1;let n=this;if(n.initErrorHandler(r),n.initLexerAdapter(),n.initLooksAhead(r),n.initRecognizerEngine(e,r),n.initRecoverable(r),n.initTreeBuilder(r),n.initContentAssist(),n.initGastRecorder(r),n.initPerformanceTracer(r),T(r,"ignoredIssues"))throw new Error(`The <ignoredIssues> IParserConfig property has been deprecated.
	Please use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.
	See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES
	For further details.`);this.skipValidations=T(r,"skipValidations")?r.skipValidations:ge.skipValidations}};Kr.DEFER_DEFINITION_ERRORS_HANDLING=!1;cc(Kr,[jn,zn,qn,Zn,Jn,Qn,eo,to,ro,io]);var Hr=class extends Kr{constructor(e,r=ge){let n=P(r);n.outputCst=!0,super(e,n)}};var mT=ee({name:"WhiteSpace",pattern:/\s+/,group:H.SKIPPED}),gT=ee({name:"Comment",pattern:/\/\/.*/,group:H.SKIPPED}),fc=ee({name:"Number",pattern:/[0-9]+/}),uc=ee({name:"String",pattern:/(["'])(?:\\.|(?!\1)[^\\])*?\1/}),pc=ee({name:"CodeString",pattern:/\$(["'])(?:\\.|(?!\1)[^\\])*?\1/}),Je=ee({name:"Identifier",pattern:/[a-zA-Z_]+\w*/}),hc=ee({name:"WidgetKeyWord",pattern:/widget/}),dc=ee({name:"LCurlyBrace",pattern:/\{/}),mc=ee({name:"RCurlyBrace",pattern:/\}/}),Qo=ee({name:"LBracket",pattern:/\(/}),Jo=ee({name:"RBracket",pattern:/\)/}),gc=ee({name:"Colon",pattern:/:/}),xc=ee({name:"Semicolon",pattern:/;/}),so=ee({name:"Comma",pattern:/,/}),Tc=ee({name:"Equal",pattern:/=/}),Ec=[mT,gT,fc,pc,uc,hc,Qo,Jo,dc,mc,gc,xc,so,Tc,Je],ei=class extends Hr{constructor(){super(Ec),this.performSelfAnalysis()}declarations=this.RULE("declarations",()=>{this.MANY(()=>{this.SUBRULE(this.widgetDeclaration)})});widgetDeclaration=this.RULE("widgetDeclaration",()=>{this.CONSUME(hc),this.CONSUME(Je),this.CONSUME(Qo),this.OPTION(()=>{this.CONSUME2(Je),this.MANY(()=>{this.CONSUME(so),this.CONSUME3(Je)})}),this.CONSUME(Jo),this.SUBRULE(this.list)});list=this.RULE("list",()=>{this.CONSUME(dc),this.OPTION(()=>{this.SUBRULE(this.expression),this.MANY(()=>{this.CONSUME(so),this.SUBRULE2(this.expression)})}),this.CONSUME(mc)});widgetUse=this.RULE("widgetUse",()=>{this.OPTION(()=>this.SUBRULE(this.widgetId)),this.CONSUME(Je),this.CONSUME(Qo),this.OPTION2(()=>{this.SUBRULE(this.expression),this.MANY(()=>{this.CONSUME(so),this.SUBRULE2(this.expression)})}),this.CONSUME(Jo),this.OPTION3(()=>this.SUBRULE(this.widgetClasses))});widgetId=this.RULE("widgetId",()=>{this.CONSUME(Je),this.CONSUME(Tc)});widgetClasses=this.RULE("widgetClasses",()=>{this.CONSUME(gc),this.CONSUME(Je),this.MANY(()=>{this.CONSUME(xc),this.CONSUME2(Je)})});expression=this.RULE("expression",()=>{this.OR([{ALT:()=>this.CONSUME(fc)},{ALT:()=>this.CONSUME(uc)},{ALT:()=>this.CONSUME(pc)},{ALT:()=>this.SUBRULE(this.widgetUse)},{ALT:()=>this.SUBRULE(this.list)},{ALT:()=>this.CONSUME(Je)}])})},xT=new H(Ec),dr=new ei;function Ac(t){let e=xT.tokenize(t);if(e.errors.length>0)throw new Error(e.errors.toString());dr.input=e.tokens;let r=dr.declarations();if(dr.errors.length>0)throw new Error(dr.errors.toString());return r}var ti=class extends dr.getBaseCstVisitorConstructor(){constructor(){super(),this.validateVisitor()}expression(e){if(e.Number)return{type:"Literal",value:e.Number[0].image};if(e.String)return{type:"Literal",value:e.String[0].image};if(e.CodeString)return{type:"Code",value:e.CodeString[0].image.slice(2,-1)};if(e.widgetUse)return this.visit(e.widgetUse[0]);if(e.list)return this.visit(e.list[0]);if(e.Identifier)return{type:"Variable",name:e.Identifier[0].image}}widgetUse(e){let r=[];if(e.expression)for(let i of e.expression)r.push(this.visit(i));let n,o=[];return e.widgetId?n=this.visit(e.widgetId):n=null,e.widgetClasses&&(o=this.visit(e.widgetClasses)),{type:"WidgetUse",name:e.Identifier[0].image,parameters:r,id:n,classes:o}}widgetId(e){return e.Identifier[0].image}widgetClasses(e){let r=[];for(let n of e.Identifier)r.push(n.image);return r}widgetDeclaration(e){let r=[];for(let n of e.Identifier.slice(1))r.push(n.image);return{type:"WidgetDeclaration",name:e.Identifier[0].image,parameters:r,list:this.visit(e.list)}}declarations(e){let r=[];if(e.widgetDeclaration)for(let n of e.widgetDeclaration)r.push(this.visit(n));return r}list(e){let r=[];if(e.expression)for(let n of e.expression)r.push(this.visit(n));return{type:"List",elements:r}}};function Ic(t){return new ti().visit(t)}TT();function TT(){let t="1.0.0",e=process.argv,r;if(e[0].endsWith("node.exe")||e[0].endsWith("node")?r=e.slice(2):r=e.slice(1),r[0]=="-h"||r[0]=="--help"){console.log(`Silicon Compiler version ${t}`),console.log("Usage: "),console.log("	[sourcedir] [libdir]"),console.log("By default: "),console.log("	./silicon ./silicon-lib");return}else if(r[0]=="-v"||r[0]=="--version"){console.log(`Silicon Compiler version ${t}`);return}let n,o;if(r.length==0)n="./silicon",o="./silicon-lib";else if(r.length==2)n=r[0],o=r[1];else{console.log("Arguments error. Use -h / --help to see help.");return}let i=uo(n);for(let a of i){let l=yc.default.readFileSync(a,"utf-8"),c=Ac(l),f=Ic(c);Pt.generateDeclarations(f)}let s=Rc.default.dirname(n);Pt.generateFiles(s),Pt.generateIndexTemplate(s,o)}
/*! Bundled license information:

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/
